<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>phrase Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.1 on Wed Oct 4 16:37:29 2000 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>phrase  Class Reference</h1>the phrase is the overall entity. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="phrase_h-source.html">phrase.h</a>&gt;</code>
<p>
Collaboration diagram for phrase:<p><center><img src="class_phrase_coll_graph.gif" border="0" usemap="#phrase_coll_map" alt="Collaboration graph"></center>
<map name="phrase_coll_map">
<area href="class_syllable.html" shape="rect" coords="35,166,88,184">
<area href="class_phon.html" shape="rect" coords="41,83,81,102">
<area href="class_PHON_FEATURES.html" shape="rect" coords="0,0,123,19">
</map><p>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="class_phrase-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="util_h.html#a4">uint</a>&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a0">MeanF0</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>returns the mean val of all f0Vals.</em> <a href="#a0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a1">calcMeanF0</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>calculates the mean val of all f0Vals.</em> <a href="#a1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>double&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a2">F0Range</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>returns range of f0Vals in SemiTones.</em> <a href="#a2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a3">printSyllableVec</a> (ostream &amp;outFile)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>prints names of phones to outFile (debugging).</em> <a href="#a3">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a4">readPhoFile</a> (istream &amp;inFile, <a class="el" href="class_globalsT.html">globalsT</a> &amp;kg)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>reads in phones for syllables from inFile.</em> <a href="#a4">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a5">readPhoList</a> (istream &amp;inFile, <a class="el" href="class_globalsT.html">globalsT</a> &amp;kg)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>assignes only names of phones and <a class="el" href="class_syllable.html">syllable</a> borders.</em> <a href="#a5">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a6">readF0FromDB</a> (string diphonBase, <a class="el" href="class_globalsT.html">globalsT</a> &amp;glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>assignes only f0-vals.</em> <a href="#a6">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a7">readPhonData</a> (string diphonBase, <a class="el" href="class_globalsT.html">globalsT</a> &amp;glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>reads in amplitudes, formantfreqs and formantbandwidths from diphon-database.</em> <a href="#a7">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a8">modelKlattParameters</a> (<a class="el" href="class_globalsT.html">globalsT</a> &amp;glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>model voice-source and articulation-tract filter parameters for each phone for normal voice.</em> <a href="#a8">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a9">modelFeatures</a> (<a class="el" href="class_globalsT.html">globalsT</a> &amp;kg)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>model voice-source and articulation-tract filter parameters for each phone according to it's assigned features.</em> <a href="#a9">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a10">printPhonMeanF0</a> (ostream &amp;outFile)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>prints means of f0-contour per <a class="el" href="class_phon.html">phon</a> to outFile (debugging).</em> <a href="#a10">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a11">printPhonFeatures</a> (ostream &amp;outFile)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>prints phonfeatures to outFile (debugging).</em> <a href="#a11">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a12">printPhoFile</a> (ostream &amp;outFile, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>prints pho-file (mbrola-format).</em> <a href="#a12">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a13">printLabelFile</a> (ostream &amp;outFile, <a class="el" href="class_globalsT.html">globalsT</a> globals)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>prints label-file (esps-format).</em> <a href="#a13">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a14">printKlattFile</a> (ostream &amp;outFile)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>prints klatt-file (iles&amp;simmons-format).</em> <a href="#a14">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a15">printSenSynFile</a> (<a class="el" href="class_globalsT.html">globalsT</a> globals, ostream &amp;outFile)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>prints klatt-file (sensymetrics-format).</em> <a href="#a15">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a16">makeTest</a> (<a class="el" href="class_globalsT.html">globalsT</a> globals, <a class="el" href="util_h.html#a4">uint</a> <a class="el" href="class_phrase.html#o2">dur</a>)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>fill a phrase with one <a class="el" href="class_syllable.html">syllable</a> with one phone of duration dur (in msec) with parameters taken from globals.</em> <a href="#a16">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a17">changeSpeechRate</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> globals, int method)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>changes duration of all phones.</em> <a href="#a17">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a18">changeDurStressed</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="util_h.html#a4">uint</a> both, <a class="el" href="class_globalsT.html">globalsT</a> globals)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>change duration of stressed syllables.</em> <a href="#a18">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a19">changeDurNonStressed</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="util_h.html#a4">uint</a> both, <a class="el" href="class_globalsT.html">globalsT</a> globals)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>change duration of unstressed syllables.</em> <a href="#a19">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a20">changeDurManner</a> (<a class="el" href="phon_h.html#a42">PHON_MANNER</a> manner, <a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> globals)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>change duration of specified phone-manners.</em> <a href="#a20">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a21">changeStressedInt</a> (int dBVal, <a class="el" href="util_h.html#a4">uint</a> both, <a class="el" href="class_globalsT.html">globalsT</a> globals)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>change intensity of stressed syllables.</em> <a href="#a21">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a22">changeMeanF0</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>all nonzero f0Vals get multiplied by &lt;rate&gt; in percent.</em> <a href="#a22">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a23">smootheF0</a> (<a class="el" href="util_h.html#a4">uint</a> winsize, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>smoothing function: all f0Vals get centerFiltered around winsize.</em> <a href="#a23">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a24">changeStressedAvrF0</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="util_h.html#a4">uint</a> both, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>change mean pitch of stressed syllables.</em> <a href="#a24">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a25">changePreStressedAvrF0</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="util_h.html#a4">uint</a> both, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>change avr pitch of the syllables before stressed syllables.</em> <a href="#a25">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a26">changeF0Range</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>changes the F0-range of phrase.</em> <a href="#a26">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a27">changeVariability</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>changes the F0-variability.</em> <a href="#a27">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a28">changePitchContourStressed</a> (<a class="el" href="util_h.html#a71">CONTOUR_TYPE</a> contour, <a class="el" href="util_h.html#a4">uint</a> gradient, <a class="el" href="util_h.html#a4">uint</a> both, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>changes pitch-contour of stressed syllables to &lt;contour&gt;.</em> <a href="#a28">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a29">changeLastSylContour</a> (<a class="el" href="util_h.html#a71">CONTOUR_TYPE</a> contour, <a class="el" href="util_h.html#a4">uint</a> gradient, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>changes pitch-contour of last <a class="el" href="class_syllable.html">syllable</a> to &lt;contour&gt;.</em> <a href="#a29">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a30">changePhraseContour</a> (<a class="el" href="util_h.html#a71">CONTOUR_TYPE</a> contour, <a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>changes pitch-contour of whole phrase to &lt;contour&gt;.</em> <a href="#a30">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a31">changePhraseContourToAccent</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>changes pitch-contour of regions of phrase divided by phraseaccents to &lt;contour&gt;.</em> <a href="#a31">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a32">addWave</a> (<a class="el" href="util_h.html#a4">uint</a> accRate, <a class="el" href="util_h.html#a4">uint</a> nonAccRate, <a class="el" href="util_h.html#a4">uint</a> method, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>The intonation-contour gets changed according to the wave-model.</em> <a href="#a32">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a33">overshootVowels</a> (<a class="el" href="syllable_h.html#a3">ACCENT_TYPE</a> accent, <a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>enhance the vowel precision.</em> <a href="#a33">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a34">undershootVowels</a> (<a class="el" href="syllable_h.html#a3">ACCENT_TYPE</a> accent, <a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>blur the vowel precision.</em> <a href="#a34">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a35">spread</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>adds spread Lips characteristices.</em> <a href="#a35">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a36">rounded</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>adds rounded Lips characteristices.</em> <a href="#a36">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a37">headSize</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>experiment: shift formant-values to model different head-sizes.</em> <a href="#a37">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a38">coarticulation</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="phon_h.html#a39">CO_TYPE</a> coType, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>model coarticulation effects.</em> <a href="#a38">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a39">assimilateConsonants</a> (<a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>should model assimilation of voicing.</em> <a href="#a39">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a40">addJitter</a> (<a class="el" href="syllable_h.html#a3">ACCENT_TYPE</a> accent, <a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="util_h.html#a4">uint</a> method, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>add Jitter (F0-Flutter).</em> <a href="#a40">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a41">addBreathy</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>simulates breathy phonation at all vowels.</em> <a href="#a41">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a42">addTense</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>simulates tense phonation at all vowels.</em> <a href="#a42">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a43">addWhisper</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>simulates whispery phonation at all vowels.</em> <a href="#a43">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a44">addLaryngealized</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>simulates laryngealization (creaky voice) at first half of vowels after unvoiced sounds.</em> <a href="#a44">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a45">addCreaky</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>simulates creaky phonation at all vowels.</em> <a href="#a45">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#a46">addFalsett</a> (<a class="el" href="util_h.html#a4">uint</a> rate, <a class="el" href="class_globalsT.html">globalsT</a> glob)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>simulates falsetto phonation at all vowels.</em> <a href="#a46">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Private Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#c0">calcDur</a> ()</td></tr>
<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top>vector&lt;<a class="el" href="class_syllable.html">syllable</a>&gt;&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#o0">syllableVec</a></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="util_h.html#a4">uint</a>&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#o1">meanF0</a></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="util_h.html#a4">uint</a>&nbsp;</td><td valign=bottom><a class="el" href="class_phrase.html#o2">dur</a></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
the phrase is the overall entity.
<p>
It consists of a list of <a class="el" href="class_syllable.html">syllable</a> . All changes made are initiated by phrase. The methods can be categorized into<ul>
<li>readIn methods<li>printOut methods<li>information methods (e.g. <a class="el" href="class_phrase.html#a0">MeanF0</a>())<li>internal calculation (<a class="el" href="class_phrase.html#a1">calcMeanF0</a>())<li>modification methods<ol>
<li>change duration parameters<li>change intensity parameters<li>change f0 parameters<li>change articulation parameters<li>change phonation parameters </ol>
</ul>

<p>
<hr><h2>Member Function Documentation</h2>
<a name="a2" doxytag="phrase::F0Range"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
double phrase::F0Range (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
returns range of f0Vals in SemiTones.
<p>
<dl compact><dt>
<b>Returns: </b><dd>
 double f0range </dl><div class="fragment"><pre>00048                        {
00049   uint minf0=A_HIGH_INT, maxf0=0;
00050   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00051     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonVec().size(); pho++) { 
00052       <font class="keywordflow">if</font> (syllableVec[syl].PhonVec()[pho].Voiced()) {
00053         <font class="keywordflow">for</font> (uint f0v=0; f0v&lt;syllableVec[syl].PhonVec()[pho].F0Vec().size(); f0v++) {
00054           <font class="keywordflow">if</font> (minf0 &gt; syllableVec[syl].PhonVec()[pho].F0Vec()[f0v] &amp;&amp;
00055               syllableVec[syl].PhonVec()[pho].F0Vec()[f0v]&gt;0)
00056             minf0 = syllableVec[syl].PhonVec()[pho].F0Vec()[f0v];
00057           <font class="keywordflow">if</font> (maxf0 &lt; syllableVec[syl].PhonVec()[pho].F0Vec()[f0v])
00058             maxf0 = syllableVec[syl].PhonVec()[pho].F0Vec()[f0v];         
00059         }
00060       }
00061     }
00062   }
00063   <font class="keywordflow">return</font> <a class="code" href="util_h.html#a42">Hz2ST</a>(minf0, maxf0); 
00064 }
</div></pre>    </td>
  </tr>
</table>
<a name="a0" doxytag="phrase::MeanF0"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
<a class="el" href="util_h.html#a4">uint</a> phrase::MeanF0 (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
returns the mean val of all f0Vals.
<p>
<dl compact><dt>
<b>Returns: </b><dd>
 uint mean </dl><div class="fragment"><pre>00026                     {
00027   <a class="code" href="class_phrase.html#a1">calcMeanF0</a>();
00028   <font class="keywordflow">return</font> meanF0;
00029 }
</div></pre>    </td>
  </tr>
</table>
<a name="a41" doxytag="phrase::addBreathy"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::addBreathy (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
simulates breathy phonation at all vowels.
<p>
<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>01507                                                 {
01508   <a class="code" href="class_phon.html">phon</a> *pP;
01509   <font class="keywordflow">if</font> (rate &gt; 100)
01510     <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::addBreathy: rate&gt;100\n"</font>,-5);
01511   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01512     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01513       pP = &amp;syllableVec[syl].PhonVec()[pho];
01514       <font class="comment">// if ((*pP).Voiced() &amp;&amp; (*pP).Manner()!=stop_voiced &amp;&amp; (*pP).Name()!="h") {</font>
01515       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a38">Type</a>() == vowel || (*pP).<a class="code" href="class_phon.html#a39">Manner</a>() == nasal) {
01516         <a class="code" href="class_PHON_FEATURES.html">PHON_FEATURES</a> tmpPhonFeatures= (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>();
01517         tmpPhonFeatures.breathy = <font class="keyword">true</font>;
01518         tmpPhonFeatures.brtStart = 0;
01519         tmpPhonFeatures.brtStop = (*pP).<a class="code" href="class_phon.html#a45">FrameNum</a>();          
01520         tmpPhonFeatures.brtRate = rate;
01521         (*pP).<a class="code" href="class_phon.html#a3">setPhonFeatures</a>(tmpPhonFeatures);
01522       }
01523     }
01524   }
01525   <font class="keywordflow">if</font>(glob.verbose)
01526     cerr &lt;&lt; <font class="stringliteral">"added breathy voice with rate: "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">"\n"</font>;
01527 }
</div></pre>    </td>
  </tr>
</table>
<a name="a45" doxytag="phrase::addCreaky"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::addCreaky (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
simulates creaky phonation at all vowels.
<p>
<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>01619                                                {
01620   <a class="code" href="class_phon.html">phon</a> *pP;
01621   <font class="keywordflow">if</font> (rate &gt; 100)
01622     <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::addCreaky: rate&gt;100\n"</font>,-5);
01623   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01624     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01625       pP = &amp;syllableVec[syl].PhonVec()[pho];
01626       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a41">Voiced</a>()) {
01627         <a class="code" href="class_PHON_FEATURES.html">PHON_FEATURES</a> tmpPhonFeatures= (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>();
01628         tmpPhonFeatures.creaky = <font class="keyword">true</font>;
01629         tmpPhonFeatures.creakyStart = 0;
01630         tmpPhonFeatures.creakyStop = (*pP).<a class="code" href="class_phon.html#a45">FrameNum</a>();       
01631         tmpPhonFeatures.creakyRate = rate;
01632         (*pP).<a class="code" href="class_phon.html#a3">setPhonFeatures</a>(tmpPhonFeatures);
01633       }
01634     }
01635   }
01636   <a class="code" href="class_phrase.html#a1">calcMeanF0</a>();
01637   <font class="keywordflow">if</font> (glob.verbose)
01638     cerr &lt;&lt; <font class="stringliteral">"added creaky voice at rate "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" \n"</font>; 
01639 }
</div></pre>    </td>
  </tr>
</table>
<a name="a46" doxytag="phrase::addFalsett"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::addFalsett (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
simulates falsetto phonation at all vowels.
<p>
<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>01648                                                 {
01649   <a class="code" href="class_phon.html">phon</a> *pP;
01650   <font class="keywordflow">if</font> (rate &gt; 100)
01651     <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::addFalsett: rate&gt;100\n"</font>,-5);
01652   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01653     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01654       pP = &amp;syllableVec[syl].PhonVec()[pho];
01655       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a41">Voiced</a>()) {
01656         <a class="code" href="class_PHON_FEATURES.html">PHON_FEATURES</a> tmpPhonFeatures= (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>();
01657         tmpPhonFeatures.falsett = <font class="keyword">true</font>;
01658         tmpPhonFeatures.falsettRate = rate;
01659         (*pP).<a class="code" href="class_phon.html#a3">setPhonFeatures</a>(tmpPhonFeatures);
01660       }
01661     }
01662   }
01663   <a class="code" href="class_phrase.html#a1">calcMeanF0</a>();
01664   <font class="keywordflow">if</font> (glob.verbose)
01665     cerr &lt;&lt; <font class="stringliteral">"added falsett voice at rate "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" \n"</font>; 
01666 }
</div></pre>    </td>
  </tr>
</table>
<a name="a40" doxytag="phrase::addJitter"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::addJitter (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="syllable_h.html#a3">ACCENT_TYPE</a> <em>accent</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="util_h.html#a4">uint</a> <em>method</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
add Jitter (F0-Flutter).
<p>
Simulates Jitter at all voiced phones in syllables with stress-type=accent. If method = 1, all nonzero f0Vals get displaced about rate  alternating down and up. (0 &gt; rate &lt; 10) If method = 2, the klattSyn parameter skew/FL is set to rate (0 &gt; rate &lt; 300) <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>ACCENT_TYPE</em>
&nbsp;</td><td>
 stress type of affected syllables </td></tr>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>01481                                                                                 {
01482   <a class="code" href="class_phon.html">phon</a> *pP;
01483   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01484     <font class="keywordflow">if</font> (syllableVec[syl].Accent()==accent) {
01485       <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01486         pP = &amp;syllableVec[syl].PhonVec()[pho];
01487         <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a38">Type</a>() == vowel) {
01488           <a class="code" href="class_PHON_FEATURES.html">PHON_FEATURES</a> tmpPhonFeatures= (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>();
01489           tmpPhonFeatures.jitter = <font class="keyword">true</font>;
01490           tmpPhonFeatures.jitterRate = rate;
01491           tmpPhonFeatures.jitterMethod = method;          
01492           (*pP).<a class="code" href="class_phon.html#a3">setPhonFeatures</a>(tmpPhonFeatures);
01493         }
01494       }
01495     }
01496   }
01497   <font class="keywordflow">if</font>(glob.verbose)
01498     cerr &lt;&lt; <font class="stringliteral">"added jitter with rate: "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">"\n"</font>;
01499 }
</div></pre>    </td>
  </tr>
</table>
<a name="a44" doxytag="phrase::addLaryngealized"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::addLaryngealized (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
simulates laryngealization (creaky voice) at first half of vowels after unvoiced sounds.
<p>
<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>01586                                                       {
01587   <a class="code" href="class_phon.html">phon</a> *pP;
01588   <font class="keywordtype">bool</font> ok;
01589   <font class="keywordflow">if</font> (rate &gt; 100)
01590     <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::addLaryngealized: rate&gt;100\n"</font>,-5);
01591   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01592     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01593       pP = &amp;syllableVec[syl].PhonVec()[pho];
01594       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a38">Type</a>()==vowel &amp;&amp; ok) {
01595         <a class="code" href="class_PHON_FEATURES.html">PHON_FEATURES</a> tmpPhonFeatures= (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>();
01596         tmpPhonFeatures.creaky = <font class="keyword">true</font>;
01597         tmpPhonFeatures.creakyStart = 0;
01598         tmpPhonFeatures.creakyStop = (*pP).<a class="code" href="class_phon.html#a45">FrameNum</a>()/2;     
01599         tmpPhonFeatures.creakyRate = rate;
01600         (*pP).<a class="code" href="class_phon.html#a3">setPhonFeatures</a>(tmpPhonFeatures);
01601       }
01602       <font class="keywordflow">if</font> (!(*pP).<a class="code" href="class_phon.html#a41">Voiced</a>())
01603         ok = <font class="keyword">true</font>;
01604       <font class="keywordflow">else</font>
01605         ok = <font class="keyword">false</font>;
01606     }
01607   }
01608   <font class="keywordflow">if</font> (glob.verbose)
01609     cerr &lt;&lt; <font class="stringliteral">"added laryngealized voice at rate "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" \n"</font>; 
01610   <a class="code" href="class_phrase.html#a1">calcMeanF0</a>();
01611 }
</div></pre>    </td>
  </tr>
</table>
<a name="a42" doxytag="phrase::addTense"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::addTense (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
simulates tense phonation at all vowels.
<p>
<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>01535                                               {
01536   <a class="code" href="class_phon.html">phon</a> *pP;
01537   <font class="keywordflow">if</font> (rate &gt; 100)
01538     <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::addWhisper: rate&gt;100\n"</font>,-5);
01539   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01540     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01541       pP = &amp;syllableVec[syl].PhonVec()[pho];
01542       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a38">Type</a>()==vowel) {
01543         <a class="code" href="class_PHON_FEATURES.html">PHON_FEATURES</a> tmpPhonFeatures= (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>();
01544         tmpPhonFeatures.tense = <font class="keyword">true</font>;
01545         tmpPhonFeatures.tenseRate = rate;
01546         (*pP).<a class="code" href="class_phon.html#a3">setPhonFeatures</a>(tmpPhonFeatures);
01547       }
01548     }
01549   }
01550   <font class="keywordflow">if</font> (glob.verbose)
01551     cerr &lt;&lt; <font class="stringliteral">"added tensed voice at rate "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" \n"</font>; 
01552 }
</div></pre>    </td>
  </tr>
</table>
<a name="a32" doxytag="phrase::addWave"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::addWave (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>accRate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="util_h.html#a4">uint</a> <em>nonAccRate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="util_h.html#a4">uint</a> <em>method</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The intonation-contour gets changed according to the wave-model.
<p>
The whole intonationContour is changed: the phrase-accented syllables get displaced according to accRate, the <a class="el" href="class_syllable.html">syllable</a> between phrase-accents get displaced according to nonAccRate and the other syllables get displaced by interpolation. The method decides about the interpolation, <ul>
<li>method=1 : linear interpolation<li>method=4 : <a class="el" href="class_syllable.html">syllable</a> countour is kept, i.e. whole <a class="el" href="class_syllable.html">syllable</a> gets shifted.</ul>
<dl compact><dt>
<b><a class="el" href="todo.html#_todo000008">Todo: </a></b><dd>
implement method=2:exponential or method=3:logarithmic interpolation</dl> <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 accRate </td></tr>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 nonAccRate </td></tr>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 method </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>01181                                                                               {
01182   vector&lt;uint&gt; tmpF0Vec, indexList, targetList;
01183   <a class="code" href="class_phon.html">phon</a> *pP;
01184   uint frameCounter=0;
01185   
01186 
01187   <font class="keywordflow">if</font> (method==LINEAR) {
01188     indexList.push_back(0);
01189     targetList.push_back(syllableVec[0].<a class="code" href="class_phrase.html#a0">MeanF0</a>());
01190     <font class="comment">// read in target vals and indices</font>
01191     <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01192       <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01193         <font class="comment">// cout &lt;&lt; (*pP).Name()&lt;&lt;" "&lt;&lt;indexList.size()&lt;&lt;"\n";</font>
01194         pP = &amp;syllableVec[syl].PhonVec()[pho];
01195         <font class="keywordflow">if</font> (syllableVec[syl].Accent()==sentence &amp;&amp; (*pP).<a class="code" href="class_phon.html#a38">Type</a>()==vowel) {
01196           <font class="keywordflow">if</font> (indexList.size()&gt;1) {
01197             uint actIndex = frameCounter+(*pP).<a class="code" href="class_phon.html#a45">FrameNum</a>()/2;
01198             uint lastIndex = indexList[indexList.size()-1];
01199             indexList.push_back(lastIndex+((actIndex-lastIndex)/2));
01200             targetList.push_back(meanF0*nonAccRate/100);                    
01201           }
01202           indexList.push_back(frameCounter+(*pP).FrameNum()/2);
01203           targetList.push_back(syllableVec[syl].<a class="code" href="class_phrase.html#a0">MeanF0</a>()*accRate/100);    
01204         }
01205         <font class="keywordflow">for</font> (uint i=0; i&lt;(*pP).<a class="code" href="class_phon.html#a45">FrameNum</a>(); i++)
01206           tmpF0Vec.push_back((*pP).F0Vec()[i]);
01207         frameCounter += (*pP).<a class="code" href="class_phon.html#a45">FrameNum</a>();
01208       }
01209     }
01210     indexList.push_back(frameCounter);
01211     targetList.push_back(syllableVec[syllableVec.size()-1].MeanF0());
01212 
01213     <font class="comment">// for (uint i=0; i&lt;indexList.size(); i++)</font>
01214     <font class="comment">//  cout &lt;&lt;indexList[i]&lt;&lt;" "&lt;&lt; targetList[i] &lt;&lt;"\n";</font>
01215 
01216     <font class="comment">// modify F0Vals    </font>
01217     <font class="keywordflow">for</font> (uint i=0; i&lt;indexList.size()-1; i++) {
01218       uint startIndex=indexList[i];
01219       uint endIndex=indexList[i+1];
01220       uint startVal=targetList[i];
01221       uint endVal=targetList[i+1];
01222 
01223       <font class="comment">// count voiced Frames</font>
01224       uint vocCounter = 0;
01225       <font class="keywordflow">for</font> (uint k=startIndex; k&lt;endIndex; k++)
01226         <font class="keywordflow">if</font> (tmpF0Vec[k] != 0)
01227           vocCounter++;  
01228       <font class="keywordflow">if</font> (startVal&lt;endVal) {
01229         <font class="keywordtype">double</font> step = (<font class="keywordtype">int</font>) (endVal-startVal) / (<font class="keywordtype">double</font>) vocCounter;
01230         <font class="comment">// cout &lt;&lt;vocCounter&lt;&lt;" "&lt;&lt;step&lt;&lt;" "&lt;&lt;startVal&lt;&lt;" "&lt;&lt;endVal&lt;&lt;"\n";</font>
01231         vocCounter = 0;
01232         <font class="keywordflow">for</font> (uint k=startIndex; k&lt;endIndex; k++) {
01233           <font class="keywordflow">if</font> (tmpF0Vec[k] != 0) {
01234             tmpF0Vec[k] = startVal+(uint) (vocCounter*step);
01235             vocCounter++;
01236           }
01237         }
01238       } <font class="keywordflow">else</font> <font class="keywordflow">if</font>  (startVal &gt; endVal) {
01239         <font class="keywordtype">double</font> step = (<font class="keywordtype">int</font>) (startVal-endVal) / (<font class="keywordtype">double</font>) vocCounter;
01240         <font class="comment">// cout &lt;&lt;vocCounter&lt;&lt;" "&lt;&lt;step&lt;&lt;" "&lt;&lt;startVal&lt;&lt;" "&lt;&lt;endVal&lt;&lt;"\n";</font>
01241         vocCounter = 0;
01242         <font class="keywordflow">for</font> (uint k=startIndex; k&lt;endIndex; k++) {
01243           <font class="keywordflow">if</font> (tmpF0Vec[k] != 0) {
01244             tmpF0Vec[k] = startVal-(uint) (vocCounter*step);
01245             vocCounter++;
01246           }
01247         }
01248       }
01249       
01250     }
01251     <font class="comment">// assign new f0 vals to phones</font>
01252     frameCounter = 0;
01253     <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01254       <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01255         pP = &amp;syllableVec[syl].PhonVec()[pho];
01256         vector&lt;uint&gt; tmpValVec(0);
01257         <font class="keywordflow">for</font> (uint i=0; i&lt;(*pP).<a class="code" href="class_phon.html#a45">FrameNum</a>(); i++) {
01258           tmpValVec.push_back(tmpF0Vec[frameCounter]);
01259           frameCounter++;
01260         }
01261         (*pP).<a class="code" href="class_phon.html#a10">setF0Vec</a>(tmpValVec, glob);
01262       }
01263     }
01264     <font class="comment">//cout &lt;&lt;indexList.size()&lt;&lt;"\n";</font>
01265   } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (method==SYLLABLE_BASED) {
01266     indexList.push_back(0);
01267     targetList.push_back(100);
01268     
01269     <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01270         <font class="keywordflow">if</font> (syllableVec[syl].Accent()==sentence) {
01271           <font class="keywordflow">if</font> (indexList.size()&gt;1) {
01272             uint actIndex = syl;
01273             uint lastIndex = indexList[indexList.size()-1];
01274             indexList.push_back(lastIndex+((actIndex-lastIndex)/2));
01275             targetList.push_back(nonAccRate);       
01276           }
01277           indexList.push_back(syl);
01278           targetList.push_back(accRate);                  
01279         }      
01280     }
01281     indexList.push_back(syllableVec.size());
01282     targetList.push_back(100);
01283 
01284     <font class="keywordflow">for</font> (uint i=0; i&lt;indexList.size()-1; i++) {      
01285       uint startIndex=indexList[i];
01286       uint endIndex=indexList[i+1];
01287       uint startVal=targetList[i];
01288       uint endVal=targetList[i+1];
01289 
01290       <font class="comment">// cout &lt;&lt; startIndex&lt;&lt;" "&lt;&lt;startVal&lt;&lt;" "&lt;&lt;endIndex&lt;&lt;" "&lt;&lt;endVal&lt;&lt;"\n";</font>
01291 
01292       <font class="keywordflow">if</font> (startVal&lt;endVal) {
01293         <font class="keywordtype">double</font> step = (<font class="keywordtype">double</font>) (endVal-startVal) / (<font class="keywordtype">double</font>) (endIndex-startIndex);
01294         <font class="keywordflow">for</font> (uint syl=startIndex; syl&lt;endIndex; syl++) {
01295           startVal += (uint) step;
01296           <font class="comment">// cout &lt;&lt; startVal&lt;&lt;" "&lt;&lt;step&lt;&lt;"\n";</font>
01297           syllableVec[syl].changeMeanF0(startVal);
01298         }      
01299       } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (startVal&gt;endVal) {
01300         <font class="keywordtype">double</font> step = (<font class="keywordtype">double</font>) (startVal-endVal) / (<font class="keywordtype">double</font>) (endIndex-startIndex);
01301         <font class="keywordflow">for</font> (uint syl=startIndex; syl&lt;endIndex; syl++) {
01302           startVal -= (uint) step;
01303           <font class="comment">// cout &lt;&lt; startVal&lt;&lt;" "&lt;&lt;step&lt;&lt;"\n";</font>
01304           syllableVec[syl].changeMeanF0(startVal);
01305         }      
01306       } 
01307     }
01308     
01309   } <font class="keywordflow">else</font>
01310     <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::addWave: method not implemented\n"</font>, -3);
01311   <font class="keywordflow">if</font> (glob.verbose)
01312     cerr &lt;&lt; <font class="stringliteral">"changed f0-countour to wave model at accRate "</font>&lt;&lt;accRate&lt;&lt;<font class="stringliteral">" and nonAccRate "</font>&lt;&lt;nonAccRate&lt;&lt;<font class="stringliteral">"\n"</font>;   
01313   <a class="code" href="class_phrase.html#a1">calcMeanF0</a>();
01314 }
</div></pre>    </td>
  </tr>
</table>
<a name="a43" doxytag="phrase::addWhisper"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::addWhisper (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
simulates whispery phonation at all vowels.
<p>
<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>01560                                                 {
01561   <a class="code" href="class_phon.html">phon</a> *pP;
01562   <font class="keywordflow">if</font> (rate &gt; 100)
01563     <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::addWhisper: rate&gt;100\n"</font>,-5);
01564   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01565     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01566       pP = &amp;syllableVec[syl].PhonVec()[pho];
01567       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a41">Voiced</a>()) {
01568         <a class="code" href="class_PHON_FEATURES.html">PHON_FEATURES</a> tmpPhonFeatures= (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>();
01569         tmpPhonFeatures.whisper = <font class="keyword">true</font>;
01570         tmpPhonFeatures.whisperRate = rate;
01571         (*pP).<a class="code" href="class_phon.html#a3">setPhonFeatures</a>(tmpPhonFeatures);
01572       }
01573     }
01574   }
01575   <font class="keywordflow">if</font> (glob.verbose)
01576     cerr &lt;&lt; <font class="stringliteral">"added whispery voice at rate "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" \n"</font>; 
01577 }
</div></pre>    </td>
  </tr>
</table>
<a name="a39" doxytag="phrase::assimilateConsonants"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::assimilateConsonants (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
should model assimilation of voicing.
<p>
Adds voicing to unvoiced fricatives in VCV-environment. Doesn't work very well. <dl compact><dt>
<b><a class="el" href="todo.html#_todo000011">Todo: </a></b><dd>
find a better modelling with better smoothing.</dl> <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>01443                                                {
01444   PHON_TYPE prevT, nextT;
01445   <a class="code" href="class_phon.html">phon</a> *pP;
01446   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01447     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01448       pP = &amp;syllableVec[syl].PhonVec()[pho];
01449       <font class="keywordflow">if</font> (pho==syllableVec[syl].PhonNum()-1)
01450         nextT = syllableVec[syl+1].PhonVec()[0].Type();
01451       <font class="keywordflow">else</font>
01452         nextT = syllableVec[syl].PhonVec()[pho+1].Type();
01453       
01454       <font class="keywordflow">if</font> (!(syl==0&amp;&amp;pho==0) &amp;&amp; !(syl==syllableVec.size()-1 &amp;&amp; 
01455                                  pho==syllableVec[syl].PhonNum()-1))
01456         <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a39">Manner</a>() == fricative_voiceless &amp;&amp; prevT==vowel &amp;&amp; nextT==vowel) {
01457           <a class="code" href="class_PHON_FEATURES.html">PHON_FEATURES</a> tmpPhonFeatures= (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>();
01458           tmpPhonFeatures.voiced = <font class="keyword">true</font>;
01459           tmpPhonFeatures.vocStart = 0;
01460           tmpPhonFeatures.vocStop = (*pP).<a class="code" href="class_phon.html#a45">FrameNum</a>();        
01461           (*pP).<a class="code" href="class_phon.html#a3">setPhonFeatures</a>(tmpPhonFeatures);
01462         }
01463       prevT = (*pP).<a class="code" href="class_phon.html#a38">Type</a>();
01464     }
01465   }
01466   <font class="keywordflow">if</font>(glob.verbose)
01467     cerr &lt;&lt; <font class="stringliteral">"assimilated consonants in VCV-environment\n"</font>;
01468 }
</div></pre>    </td>
  </tr>
</table>
<a name="c0" doxytag="phrase::calcDur"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::calcDur (
          </b></td>
          <td valign="bottom"><b>
)<code> [private]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre>00068                      {
00069   uint durSum=0;
00070   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00071     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonVec().size(); pho++) { 
00072       durSum +=  syllableVec[syl].PhonVec()[pho].Dur();
00073     }
00074   }
00075   dur = durSum;
00076 }
</div></pre>    </td>
  </tr>
</table>
<a name="a1" doxytag="phrase::calcMeanF0"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::calcMeanF0 (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
calculates the mean val of all f0Vals.
<p>
To be done after an intonation change or falsetto or creaky voice (they change pitch also) <div class="fragment"><pre>00031                         {
00032   uint f0Sum=0, f0Num=0;
00033   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00034     syllableVec[syl].calcMeanF0();
00035     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonVec().size(); pho++) { 
00036       <font class="keywordflow">if</font> (syllableVec[syl].PhonVec()[pho].Voiced()) {
00037         <font class="keywordflow">for</font> (uint f0v=0; f0v&lt;syllableVec[syl].PhonVec()[pho].F0Vec().size(); f0v++) {
00038           f0Sum += syllableVec[syl].PhonVec()[pho].F0Vec()[f0v];
00039         }
00040         f0Num +=  syllableVec[syl].PhonVec()[pho].FrameNum();
00041       }
00042     }
00043   }
00044   
00045   meanF0 = f0Num&gt;0 ? (uint) f0Sum/f0Num : 0;
00046 }
</div></pre>    </td>
  </tr>
</table>
<a name="a20" doxytag="phrase::changeDurManner"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::changeDurManner (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="phon_h.html#a42">PHON_MANNER</a> <em>manner</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>globals</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
change duration of specified phone-manners.
<p>
<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>PHON_MANNER</em>
&nbsp;</td><td>
 manner, i.e. short_vowel, liquide, ...  </td></tr>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>00701                                                                          {
00702   <a class="code" href="class_phon.html">phon</a> *pP;
00703   <font class="keywordflow">if</font> (rate &lt; MIN_SPEECHRATE || rate &gt; MAX_SPEECHRATE)
00704     <a class="code" href="util_h.html#a57">error</a> (<font class="stringliteral">"phrase::changeDurManner: rate &lt; MIN_SPEECHRATE || rate &gt; MAX_SPEECHRATE"</font>, -3);
00705   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00706     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {       
00707       <font class="keywordflow">if</font> (!(syl==0&amp;&amp;pho==0) &amp;&amp;
00708           !(syl==syllableVec.size()-1&amp;&amp;pho==syllableVec[syl].PhonNum()-1)) {
00709         pP = &amp;syllableVec[syl].PhonVec()[pho];
00710         <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a39">Manner</a>()==manner) {
00711           uint newDur = (*pP).<a class="code" href="class_phon.html#a44">Dur</a>() * rate/100;     
00712           (*pP).<a class="code" href="class_phon.html#a120">changeDur</a>(newDur, glob);
00713         }
00714       }
00715     }
00716   }
00717   <a class="code" href="class_phrase.html#c0">calcDur</a>();
00718   <font class="keywordflow">if</font> (glob.verbose)
00719     cerr &lt;&lt; <font class="stringliteral">"changed duration of phones with specified manner at "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" percent\n"</font>;
00720 }
</div></pre>    </td>
  </tr>
</table>
<a name="a19" doxytag="phrase::changeDurNonStressed"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::changeDurNonStressed (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="util_h.html#a4">uint</a> <em>both</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>globals</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
change duration of unstressed syllables.
<p>
By changing duration of vowel in <a class="el" href="class_syllable.html">syllable</a> (the shortening/lengthening of syllables  effects primarily the vowels). The arg &lt;both&gt; decides whether word-accents are counted or not. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 both </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>00650                                                                       {
00651   <a class="code" href="class_phon.html">phon</a> *pP;
00652   <font class="keywordflow">if</font> (rate &lt; MIN_SPEECHRATE || rate &gt; MAX_SPEECHRATE)
00653     <a class="code" href="util_h.html#a57">error</a> (<font class="stringliteral">"phrase::changeDurNonStressed: rate &lt; MIN_SPEECHRATE || rate &gt; MAX_SPEECHRATE"</font>, -3);
00654 
00655   <font class="keywordflow">if</font> (both) {
00656     <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00657       <font class="keywordflow">if</font> (syllableVec[syl].Accent()==word ||syllableVec[syl].Accent()==none) {
00658         <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {           
00659           <font class="keywordflow">if</font> (!(syl==0&amp;&amp;pho==0) &amp;&amp;
00660               !(syl==syllableVec.size()-1&amp;&amp;pho==syllableVec[syl].PhonNum()-1)) {
00661             pP = &amp;syllableVec[syl].PhonVec()[pho];
00662             <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a38">Type</a>()==vowel) {
00663               uint newDur = (*pP).<a class="code" href="class_phon.html#a44">Dur</a>() * rate/100;     
00664               (*pP).<a class="code" href="class_phon.html#a120">changeDur</a>(newDur, glob);
00665             }
00666           }
00667         }
00668       }
00669     }
00670   } <font class="keywordflow">else</font> { <font class="comment">// only non-accent</font>
00671     <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00672       <font class="keywordflow">if</font> (syllableVec[syl].Accent()==none) {
00673         <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {           
00674           <font class="keywordflow">if</font> (!(syl==0&amp;&amp;pho==0) &amp;&amp;
00675               !(syl==syllableVec.size()-1&amp;&amp;pho==syllableVec[syl].PhonNum()-1)) {
00676             pP = &amp;syllableVec[syl].PhonVec()[pho];
00677             <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a38">Type</a>()==vowel) {
00678               uint newDur = (*pP).<a class="code" href="class_phon.html#a44">Dur</a>() * rate/100;     
00679               (*pP).<a class="code" href="class_phon.html#a120">changeDur</a>(newDur, glob);
00680             }
00681           }
00682         }
00683       }
00684     }      
00685   }
00686   <a class="code" href="class_phrase.html#c0">calcDur</a>();
00687   <font class="keywordflow">if</font> (glob.verbose) {
00688     <font class="keywordflow">if</font> (both)
00689       cerr &lt;&lt; <font class="stringliteral">"changed duration of non phrase-stressed syllables at "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" percent\n"</font>;
00690     <font class="keywordflow">else</font>
00691       cerr &lt;&lt; <font class="stringliteral">"changed duration of non stressed syllables at "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" percent\n"</font>;      
00692   }
00693 }
</div></pre>    </td>
  </tr>
</table>
<a name="a18" doxytag="phrase::changeDurStressed"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::changeDurStressed (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="util_h.html#a4">uint</a> <em>both</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>globals</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
change duration of stressed syllables.
<p>
By changing duration of vowel in <a class="el" href="class_syllable.html">syllable</a> (the shortening/lengthening of syllables  effects primarily the vowels). The arg &lt;both&gt; decides whether word-accents are counted or not. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 both </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>00592                                                                    {
00593   <a class="code" href="class_phon.html">phon</a> *pP;
00594   <font class="keywordflow">if</font> (rate &lt; MIN_SPEECHRATE || rate &gt; MAX_SPEECHRATE)
00595     <a class="code" href="util_h.html#a57">error</a> (<font class="stringliteral">"phrase::changeDurStressed: rate &lt; MIN_SPEECHRATE || rate &gt; MAX_SPEECHRATE"</font>, -3);
00596 
00597   <font class="keywordflow">if</font> (both) {
00598     <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00599       <font class="keywordflow">if</font> (syllableVec[syl].Accent()==word ||syllableVec[syl].Accent()==sentence) {
00600         <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {           
00601           <font class="keywordflow">if</font> (!(syl==0&amp;&amp;pho==0) &amp;&amp;
00602               !(syl==syllableVec.size()-1&amp;&amp;pho==syllableVec[syl].PhonNum()-1)) {
00603             pP = &amp;syllableVec[syl].PhonVec()[pho];
00604             <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a38">Type</a>()==vowel) {
00605               <font class="keywordflow">if</font> (!(rate&gt;100 &amp;&amp; (*pP).<a class="code" href="class_phon.html#a42">Diphtong</a>())) {
00606                 uint newDur = (*pP).<a class="code" href="class_phon.html#a44">Dur</a>() * rate/100;     
00607                 (*pP).<a class="code" href="class_phon.html#a120">changeDur</a>(newDur, glob);
00608               }
00609             }
00610           }
00611         }
00612       }
00613     }
00614   } <font class="keywordflow">else</font> { <font class="comment">// only sentence-accent</font>
00615     <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00616       <font class="keywordflow">if</font> (syllableVec[syl].Accent()==sentence) {
00617         <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
00618           <font class="keywordflow">if</font> (!(syl==0&amp;&amp;pho==0) &amp;&amp;
00619               !(syl==syllableVec.size()-1&amp;&amp;pho==syllableVec[syl].PhonNum()-1)) {
00620             
00621             pP = &amp;syllableVec[syl].PhonVec()[pho];
00622             <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a38">Type</a>()==vowel) {
00623               uint newDur = (*pP).<a class="code" href="class_phon.html#a44">Dur</a>() * rate/100;     
00624               (*pP).<a class="code" href="class_phon.html#a120">changeDur</a>(newDur, glob);
00625             }
00626           }
00627         }
00628       }
00629     }      
00630   }
00631   <a class="code" href="class_phrase.html#c0">calcDur</a>();
00632   <font class="keywordflow">if</font> (glob.verbose) {
00633     <font class="keywordflow">if</font> (both)
00634       cerr &lt;&lt; <font class="stringliteral">"changed duration of all stressed syllables at "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" percent\n"</font>;
00635     <font class="keywordflow">else</font>
00636       cerr &lt;&lt; <font class="stringliteral">"changed duration of phrase-stressed syllables at "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" percent\n"</font>;      
00637   }
00638 }
</div></pre>    </td>
  </tr>
</table>
<a name="a26" doxytag="phrase::changeF0Range"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::changeF0Range (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
changes the F0-range of phrase.
<p>
The f0-contour gets expanded or compressed with the mean-f0 of the last <a class="el" href="class_syllable.html">syllable</a> as reference. That's fine with declaration sentences. <dl compact><dt>
<b><a class="el" href="todo.html#_todo000007">Todo: </a></b><dd>
think about question sentences.</dl> <dl compact><dt>
<b>See also: </b><dd>
 <a class="el" href="class_syllable.html#a13">syllable::changeF0Range</a>() ,  <a class="el" href="class_phon.html#a124">phon::changeF0Range</a>() </dl><dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>00864                                                    {
00865   uint lastMean = syllableVec[syllableVec.size()-1].MeanF0();
00866   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++)
00867     syllableVec[syl].changeF0Range(rate, lastMean);
00868   
00869   <font class="keywordflow">if</font> (glob.verbose)
00870     cerr &lt;&lt; <font class="stringliteral">"changed F0-range at "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" percent\n"</font>;
00871   <a class="code" href="class_phrase.html#a1">calcMeanF0</a>();
00872 }
</div></pre>    </td>
  </tr>
</table>
<a name="a29" doxytag="phrase::changeLastSylContour"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::changeLastSylContour (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a71">CONTOUR_TYPE</a> <em>contour</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="util_h.html#a4">uint</a> <em>gradient</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
changes pitch-contour of last <a class="el" href="class_syllable.html">syllable</a> to &lt;contour&gt;.
<p>
&lt;contour&gt; can be straight, rise or fall<ul>
<li>straight: <li>rise/fall: last <a class="el" href="class_syllable.html">syllable</a> gets pitch-changed according to  &lt;gradient (ST/sec)&gt;.</ul>
<dl compact><dt>
<b>See also: </b><dd>
 <a class="el" href="class_phon.html#a125">phon::interpolateF0Vec</a>()</dl><dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 CONTOUR_TYPE contour </td></tr>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 gradient </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>00900                                                                                     {
00901   <a class="code" href="class_phon.html">phon</a> *pP;
00902   uint start=0, end;
00903   <font class="keywordtype">bool</font> found=<font class="keyword">false</font>;
00904   uint lastSyl=syllableVec.size()-1;
00905   <font class="keywordflow">switch</font> (contour) {
00906   <font class="keywordflow">case</font> straight:
00907     start=syllableVec[lastSyl].MeanF0();
00908     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[lastSyl].PhonNum(); pho++) {
00909       pP = &amp;syllableVec[lastSyl].PhonVec()[pho];
00910       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a41">Voiced</a>()) {
00911         (*pP).<a class="code" href="class_phon.html#a125">interpolateF0Vec</a>(start, start);
00912       }
00913     }  
00914     <font class="keywordflow">break</font>;
00915   <font class="keywordflow">case</font> rise:
00916     found=<font class="keyword">false</font>;
00917     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[lastSyl].PhonNum(); pho++) {
00918       pP = &amp;syllableVec[lastSyl].PhonVec()[pho];
00919       <font class="keywordflow">for</font> (uint i=0; i&lt;(*pP).<a class="code" href="class_phon.html#a51">F0Vec</a>().size(); i++) {
00920         <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a51">F0Vec</a>()[i] != 0) {
00921           start = (*pP).<a class="code" href="class_phon.html#a51">F0Vec</a>()[i];
00922           found=<font class="keyword">true</font>;
00923           <font class="keywordflow">break</font>;
00924         }
00925       }
00926       <font class="keywordflow">if</font> (found)
00927         <font class="keywordflow">break</font>;
00928     }
00929     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[lastSyl].PhonNum(); pho++) {
00930       pP = &amp;syllableVec[lastSyl].PhonVec()[pho];
00931       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a41">Voiced</a>()) {
00932         end = (uint) <a class="code" href="util_h.html#a43">gradient2Hz</a>(start, (*pP).Dur(), gradient);
00933         <font class="comment">// cout &lt;&lt;"start: "&lt;&lt; start &lt;&lt; " " &lt;&lt; end &lt;&lt; "\n";</font>
00934         (*pP).<a class="code" href="class_phon.html#a125">interpolateF0Vec</a>(start, end);
00935         start = end;
00936       }
00937     }
00938     <font class="keywordflow">break</font>;
00939   <font class="keywordflow">case</font> fall:
00940     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[lastSyl].PhonNum(); pho++) {
00941       pP = &amp;syllableVec[lastSyl].PhonVec()[pho];
00942       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a36">MeanF0</a>()!=0) {
00943         start=(*pP).<a class="code" href="class_phon.html#a36">MeanF0</a>();
00944         <font class="keywordflow">break</font>;
00945       }
00946     }
00947     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[lastSyl].PhonNum(); pho++) {
00948       pP = &amp;syllableVec[lastSyl].PhonVec()[pho];
00949       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a41">Voiced</a>()) {
00950         end = start - ((uint) <a class="code" href="util_h.html#a43">gradient2Hz</a>(start, (*pP).Dur(), gradient) - start);
00951         <font class="comment">// cout &lt;&lt;"start: "&lt;&lt; start &lt;&lt; " " &lt;&lt; end &lt;&lt; "\n";</font>
00952         (*pP).<a class="code" href="class_phon.html#a125">interpolateF0Vec</a>(start, end);
00953         start = end;
00954       }
00955     }
00956     <font class="keywordflow">break</font>;
00957   }
00958   syllableVec[lastSyl].calcMeanF0();
00959   <a class="code" href="class_phrase.html#a1">calcMeanF0</a>();
00960   <font class="keywordflow">if</font> (glob.verbose)
00961     cerr &lt;&lt; <font class="stringliteral">"changed f0-countour of last syllable to gradient "</font>&lt;&lt;gradient&lt;&lt;<font class="stringliteral">" \n"</font>; 
00962 }
</div></pre>    </td>
  </tr>
</table>
<a name="a22" doxytag="phrase::changeMeanF0"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::changeMeanF0 (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
all nonzero f0Vals get multiplied by &lt;rate&gt; in percent.
<p>
(so rate=100 means no change). <dl compact><dt>
<b>See also: </b><dd>
 <a class="el" href="class_syllable.html#a15">syllable::changeMeanF0</a>() ,  <a class="el" href="class_phon.html#a122">phon::changeMeanF0</a>() </dl><dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>00766                                                   {
00767   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00768     syllableVec[syl].changeMeanF0(rate);
00769   }
00770   <a class="code" href="class_phrase.html#a1">calcMeanF0</a>();
00771   <font class="keywordflow">if</font> (glob.verbose)
00772     cerr &lt;&lt; <font class="stringliteral">"changed avr. F0 at "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" percent\n"</font>;
00773 }
</div></pre>    </td>
  </tr>
</table>
<a name="a30" doxytag="phrase::changePhraseContour"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::changePhraseContour (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a71">CONTOUR_TYPE</a> <em>contour</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
changes pitch-contour of whole phrase to &lt;contour&gt;.
<p>
&lt;contour&gt; can be straight, rise or fall<ul>
<li>straight: all <a class="el" href="class_syllable.html">syllable</a>-meanF0Vals become meanF0Val<li>rise/fall: last <a class="el" href="class_syllable.html">syllable</a> gets pitch-changed according to &lt;rate&gt;,  all syllables before get changed in percentage to distance from  last <a class="el" href="class_syllable.html">syllable</a>  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 CONTOUR_TYPE contour </td></tr>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </ul>
</td></tr>
</table>
</dl><div class="fragment"><pre>01113                                                                                {
01114   uint tmpRate;
01115   <font class="keywordtype">int</font> step = ((<font class="keywordtype">int</font>)rate - 100)/(<font class="keywordtype">int</font>)syllableVec.size();
01116   tmpRate=0;
01117 
01118   <font class="keywordflow">if</font> (contour==rise || contour==fall) {
01119     <font class="keywordflow">for</font> (uint tmpSyl=0; tmpSyl &lt;syllableVec.size(); tmpSyl++) { 
01120       tmpRate = 100 + (step * tmpSyl);
01121       <font class="comment">// cout &lt;&lt; tmpSyl &lt;&lt; " " &lt;&lt; step&lt;&lt;" "&lt;&lt;tmpRate &lt;&lt; " " &lt;&lt; rate&lt;&lt;"\n";</font>
01122       <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[tmpSyl].PhonNum(); pho++) 
01123         syllableVec[tmpSyl].PhonVec()[pho].changeMeanF0(tmpRate);    
01124     }
01125   } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (contour == straight) {
01126     <font class="comment">// error("feature not implemented\n", -3);</font>
01127     <font class="keywordflow">for</font> (uint tmpSyl=0; tmpSyl &lt;syllableVec.size(); tmpSyl++) { 
01128       <font class="keywordtype">int</font> f0MeanDiff = (<font class="keywordtype">int</font>) ((<font class="keywordtype">double</font>) meanF0 / (<font class="keywordtype">double</font>) syllableVec[tmpSyl].MeanF0() * 100.0);
01129       
01130       <font class="comment">// cout &lt;&lt;f0MeanDiff &lt;&lt;"\n";</font>
01131       <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[tmpSyl].PhonNum(); pho++) {
01132         syllableVec[tmpSyl].PhonVec()[pho].changeMeanF0(f0MeanDiff);
01133         ;
01134       }    
01135     }
01136 
01137   }
01138   <font class="keywordflow">if</font> (glob.verbose)
01139     cerr &lt;&lt; <font class="stringliteral">"changed f0-countour of phrase at rate "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" \n"</font>; 
01140   <a class="code" href="class_phrase.html#a1">calcMeanF0</a>();
01141 }
</div></pre>    </td>
  </tr>
</table>
<a name="a31" doxytag="phrase::changePhraseContourToAccent"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::changePhraseContourToAccent (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
changes pitch-contour of regions of phrase divided by phraseaccents to &lt;contour&gt;.
<p>
Like <a class="el" href="class_phrase.html#a30">changePhraseContour</a>(), but repeated for every accented <a class="el" href="class_syllable.html">syllable</a>. A straight contour is not implemented, if rate&gt;100 it's a rise and if rate&lt;100 it's a fall. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>01150                                                                  {
01151   uint sylC=0, tmpRate;
01152   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01153     <font class="keywordflow">if</font> (syllableVec[syl].Accent()==sentence) { <font class="comment">// if the syl has accent</font>
01154       <font class="keywordtype">int</font> step = ((<font class="keywordtype">int</font>)rate - 100)/(<font class="keywordtype">int</font>)sylC;
01155       tmpRate=0;
01156       <font class="keywordflow">for</font> (uint tmpSyl=syl-sylC; tmpSyl &lt;= syl; tmpSyl++) { <font class="comment">// foreach syl before the accent    </font>
01157         tmpRate = 100 + (step *  (tmpSyl-(syl-sylC)));
01158         <font class="comment">//      cout &lt;&lt; tmpSyl &lt;&lt; " " &lt;&lt; step&lt;&lt;" "&lt;&lt;tmpRate &lt;&lt; " " &lt;&lt; rate&lt;&lt;"\n";</font>
01159         syllableVec[tmpSyl].changeMeanF0(tmpRate);
01160         
01161       }
01162       sylC=0;
01163     } <font class="keywordflow">else</font>
01164       sylC++;
01165   }
01166   <font class="keywordflow">if</font> (glob.verbose)
01167     cerr &lt;&lt; <font class="stringliteral">"changed f0-countour to accented syllables at rate "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" \n"</font>; 
01168   <a class="code" href="class_phrase.html#a1">calcMeanF0</a>();
01169 }
</div></pre>    </td>
  </tr>
</table>
<a name="a28" doxytag="phrase::changePitchContourStressed"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::changePitchContourStressed (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a71">CONTOUR_TYPE</a> <em>contour</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="util_h.html#a4">uint</a> <em>gradient</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="util_h.html#a4">uint</a> <em>both</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
changes pitch-contour of stressed syllables to &lt;contour&gt;.
<p>
&lt;contour&gt; can be straight, rise or fall<ul>
<li>straight: all nonzero f0Vals of acc. <a class="el" href="class_syllable.html">syllable</a> become meanF0Val<li>rise: all nonzero f0Vals rise from firstVal to gradient (in ST/sec)<li>fall: all nonzero f0Vals fall from meanVal of first voiced phone to  gradient</ul>
The arg &lt;both&gt; decides whether word-accents are counted or not. <dl compact><dt>
<b>See also: </b><dd>
 <a class="el" href="util_h.html#a71">CONTOUR_TYPE</a> ,  <a class="el" href="class_phon.html#a125">phon::interpolateF0Vec</a>()  </dl><dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 CONTOUR_TYPE contour </td></tr>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 gradient </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>00968                                                                                                      {
00969   <a class="code" href="class_phon.html">phon</a> *pP;
00970   uint start=0, end;
00971   <font class="keywordtype">bool</font> found=<font class="keyword">false</font>;
00972   <font class="keywordflow">if</font> (both) {
00973     <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size()-1; syl++) {      
00974       found=<font class="keyword">false</font>;
00975       start=0;
00976       <font class="keywordflow">if</font> (syllableVec[syl].Accent()==word || syllableVec[syl].Accent()==sentence) {
00977         <font class="comment">// cout &lt;&lt; syllableVec[syl].MeanF0() &lt;&lt; "\n";</font>
00978 
00979         <font class="keywordflow">switch</font> (contour) {
00980         <font class="keywordflow">case</font> straight:
00981           syllableVec[syl].changeF0Range(gradient);
00982           <font class="keywordflow">break</font>;
00983         <font class="keywordflow">case</font> rise:
00984           found=<font class="keyword">false</font>;
00985           <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
00986             pP = &amp;syllableVec[syl].PhonVec()[pho];
00987             <font class="keywordflow">for</font> (uint i=0; i&lt;(*pP).<a class="code" href="class_phon.html#a51">F0Vec</a>().size(); i++) {
00988               <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a51">F0Vec</a>()[i] != 0) {
00989                 start = (*pP).<a class="code" href="class_phon.html#a51">F0Vec</a>()[i];
00990                 found=<font class="keyword">true</font>;
00991                 <font class="keywordflow">break</font>;
00992               }
00993             }
00994             <font class="keywordflow">if</font> (found)
00995               <font class="keywordflow">break</font>;
00996           }
00997           <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
00998             pP = &amp;syllableVec[syl].PhonVec()[pho];
00999             <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a41">Voiced</a>()) {
01000               end = (uint) <a class="code" href="util_h.html#a43">gradient2Hz</a>(start, (*pP).Dur(), gradient);
01001               <font class="comment">// cout &lt;&lt;"start: "&lt;&lt; start &lt;&lt; " " &lt;&lt; end &lt;&lt; "\n";</font>
01002               (*pP).<a class="code" href="class_phon.html#a125">interpolateF0Vec</a>(start, end);
01003               start = end;
01004             }
01005           }
01006           <font class="keywordflow">break</font>;
01007         <font class="keywordflow">case</font> fall:
01008           start = syllableVec[syl].MeanF0();
01009           <font class="comment">// start fall from mean f0Val</font>
01010           <font class="comment">/*
</font>01011 <font class="comment">          for (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
</font>01012 <font class="comment">            pP = &amp;syllableVec[syl].PhonVec()[pho];
</font>01013 <font class="comment">            if ((*pP).MeanF0()!=0) {
</font>01014 <font class="comment">              start=(*pP).MeanF0();
</font>01015 <font class="comment">              break;
</font>01016 <font class="comment">            }
</font>01017 <font class="comment">          }
</font>01018 <font class="comment">          */</font>
01019           <font class="comment">// start fall from first nonzero f0Val</font>
01020           <font class="comment">//      for (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {</font>
01021           <font class="comment">//  pP = &amp;syllableVec[syl].PhonVec()[pho];</font>
01022           <font class="comment">// for (uint i=0; i&lt;(*pP).FrameNum(); i++) {</font>
01023           <font class="comment">//  if ((*pP).F0Vec()[i]!=0) {</font>
01024           <font class="comment">//start=(*pP).F0Vec()[i];</font>
01025           <font class="comment">//break;</font>
01026           <font class="comment">//  }</font>
01027           <font class="comment">//}</font>
01028           <font class="comment">//}</font>
01029           <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01030             pP = &amp;syllableVec[syl].PhonVec()[pho];
01031             <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a41">Voiced</a>()) {
01032               end = start - ((uint) <a class="code" href="util_h.html#a43">gradient2Hz</a>(start, (*pP).Dur(), gradient) - start);
01033               <font class="comment">// cout &lt;&lt;"start: "&lt;&lt; start &lt;&lt; " " &lt;&lt; end &lt;&lt; "\n";</font>
01034               (*pP).<a class="code" href="class_phon.html#a125">interpolateF0Vec</a>(start, end);
01035               start = end;
01036             }
01037           }
01038           <font class="keywordflow">break</font>;
01039         }
01040       }
01041     } 
01042   } <font class="keywordflow">else</font> { <font class="comment">// only sentence-accent</font>
01043     <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size()-1; syl++) {
01044       <font class="keywordflow">if</font> (syllableVec[syl].Accent()==sentence) {
01045         <font class="keywordflow">switch</font> (contour) {
01046         <font class="keywordflow">case</font> straight:
01047           syllableVec[syl].changeF0Range(gradient);
01048           <font class="keywordflow">break</font>;
01049         <font class="keywordflow">case</font> rise:
01050           found=<font class="keyword">false</font>;
01051           <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01052             pP = &amp;syllableVec[syl].PhonVec()[pho];
01053             <font class="keywordflow">for</font> (uint i=0; i&lt;(*pP).<a class="code" href="class_phon.html#a51">F0Vec</a>().size(); i++) {
01054               <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a51">F0Vec</a>()[i] != 0) {
01055                 start = (*pP).<a class="code" href="class_phon.html#a51">F0Vec</a>()[i];
01056                 found=<font class="keyword">true</font>;
01057                 <font class="keywordflow">break</font>;
01058               }
01059             }
01060             <font class="keywordflow">if</font> (found)
01061               <font class="keywordflow">break</font>;
01062           }
01063           <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01064             pP = &amp;syllableVec[syl].PhonVec()[pho];
01065             <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a41">Voiced</a>()) {
01066               end = (uint) <a class="code" href="util_h.html#a43">gradient2Hz</a>(start, (*pP).Dur(), gradient);
01067               (*pP).<a class="code" href="class_phon.html#a125">interpolateF0Vec</a>(start, end);
01068               start = end;
01069             }
01070           }
01071           <font class="keywordflow">break</font>;
01072         <font class="keywordflow">case</font> fall:
01073           <font class="comment">// find first nonzero f0Val</font>
01074           <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01075             pP = &amp;syllableVec[syl].PhonVec()[pho];
01076             <font class="keywordflow">for</font> (uint i=0; i&lt;(*pP).<a class="code" href="class_phon.html#a45">FrameNum</a>(); i++) {
01077               <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a51">F0Vec</a>()[i]!=0) {
01078                 start=(*pP).<a class="code" href="class_phon.html#a51">F0Vec</a>()[i];
01079                 <font class="keywordflow">break</font>;
01080               }
01081             }
01082           }
01083           <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01084             pP = &amp;syllableVec[syl].PhonVec()[pho];
01085             <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a41">Voiced</a>()) {
01086               end = start - ((uint) <a class="code" href="util_h.html#a43">gradient2Hz</a>(start, (*pP).Dur(), gradient) - start);
01087               (*pP).<a class="code" href="class_phon.html#a125">interpolateF0Vec</a>(start, end);
01088               start = end;
01089             }
01090           }
01091           <font class="keywordflow">break</font>;
01092         }
01093       }
01094     }
01095   } 
01096   <font class="keywordflow">if</font> (glob.verbose)
01097     cerr &lt;&lt; <font class="stringliteral">"changed f0-countour of stressed syllables to gradient "</font>&lt;&lt;gradient&lt;&lt;<font class="stringliteral">" \n"</font>; 
01098   <a class="code" href="class_phrase.html#a1">calcMeanF0</a>();
01099 }
</div></pre>    </td>
  </tr>
</table>
<a name="a25" doxytag="phrase::changePreStressedAvrF0"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::changePreStressedAvrF0 (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="util_h.html#a4">uint</a> <em>both</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
change avr pitch of the syllables before stressed syllables.
<p>
All nonzero f0Vals get multiplied by &lt;rate&gt; in percent. The arg &lt;both&gt; decides whether word-accents are counted or not. The last <a class="el" href="class_syllable.html">syllable</a> is not affected (even if stressed), but has to be provided specially. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 both </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>00836                                                                        {
00837   <font class="keywordflow">if</font> (both) {
00838     <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size()-1; syl++) {
00839       <font class="keywordflow">if</font> (syllableVec[syl+1].Accent()==word ||syllableVec[syl+1].Accent()==sentence) {
00840         syllableVec[syl].changeMeanF0(rate);
00841       }
00842     }
00843   } <font class="keywordflow">else</font> { <font class="comment">// only sentence-accent</font>
00844     <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00845       <font class="keywordflow">if</font> (syllableVec[syl+1].Accent()==sentence) {
00846         syllableVec[syl].changeMeanF0(rate);
00847       }
00848     }      
00849   }
00850   <font class="keywordflow">if</font> (both)
00851     cerr &lt;&lt; <font class="stringliteral">"changed avr. F0 of all syls prior to stress at "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" percent\n"</font>;
00852   <font class="keywordflow">else</font>
00853     cerr &lt;&lt; <font class="stringliteral">"changed avr. F0 of syls prior to phrase-stress at "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" percent\n"</font>;      
00854   <a class="code" href="class_phrase.html#a1">calcMeanF0</a>();
00855 }
</div></pre>    </td>
  </tr>
</table>
<a name="a17" doxytag="phrase::changeSpeechRate"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::changeSpeechRate (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>globals</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>method</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
changes duration of all phones.
<p>
if method = 0, then change duration of all phones in the utterance by factor &lt;rate&gt; if method = 1, then  phrasestressed vowels get 100% change, wordstressed vowels get 90 % change, all others get 80 % change (phonetically adequate) <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 method </td></tr>
</table>
</dl><div class="fragment"><pre>00526                                                                    {
00527   <font class="keywordtype">int</font> absChange, wordChange, vowelChange, consChange;
00528   <a class="code" href="class_phon.html">phon</a> *pP;  
00529   uint newDur;
00530   <font class="keywordflow">if</font> (method == 0) {
00531     <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00532       <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
00533         <font class="keywordflow">if</font> (!(syl==0&amp;&amp;pho==0) &amp;&amp;
00534             !(syl==syllableVec.size()-1&amp;&amp;pho==syllableVec[syl].PhonNum()-1)) {
00535           
00536           pP = &amp;syllableVec[syl].PhonVec()[pho];
00537           <font class="keywordflow">if</font> (!(rate&gt;100 &amp;&amp; syllableVec[syl].PhonVec()[pho].Diphtong())) {
00538             newDur = (*pP).<a class="code" href="class_phon.html#a44">Dur</a>() * rate/100;     
00539             (*pP).<a class="code" href="class_phon.html#a120">changeDur</a>(newDur, glob);
00540           }
00541         }
00542       }
00543     }
00544   } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (method == 1) {
00545     absChange = abs(100-(<font class="keywordtype">int</font>)rate);
00546     <font class="keywordflow">if</font> (rate&gt;100) {
00547       wordChange = 100 + (<font class="keywordtype">int</font>) (absChange*0.9);
00548       vowelChange = 100 + (<font class="keywordtype">int</font>) (absChange*0.7);
00549       consChange = 100 + (<font class="keywordtype">int</font>) (absChange*0.5);
00550     } <font class="keywordflow">else</font> {
00551       wordChange = 100 - (<font class="keywordtype">int</font>) (absChange*0.9);
00552       vowelChange = 100 - (<font class="keywordtype">int</font>) (absChange*0.7);
00553       consChange = 100 - (<font class="keywordtype">int</font>) (absChange*0.5);
00554     }
00555     <font class="comment">//    cout &lt;&lt; wordChange&lt;&lt;" "&lt;&lt;vowelChange&lt;&lt;" "&lt;&lt;consChange&lt;&lt;"\n";</font>
00556     <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00557       <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
00558         <font class="keywordflow">if</font> (!(syl==0&amp;&amp;pho==0) &amp;&amp;
00559             !(syl==syllableVec.size()-1&amp;&amp;pho==syllableVec[syl].PhonNum()-1)) {
00560           
00561           pP = &amp;syllableVec[syl].PhonVec()[pho];
00562           <font class="keywordflow">if</font> (syllableVec[syl].Accent()==sentence &amp;&amp; (*pP).<a class="code" href="class_phon.html#a38">Type</a>()==vowel)
00563             newDur = syllableVec[syl].PhonVec()[pho].Dur() * rate/100;
00564           <font class="keywordflow">else</font> <font class="keywordflow">if</font>  (syllableVec[syl].Accent()==word &amp;&amp; (*pP).<a class="code" href="class_phon.html#a38">Type</a>()==vowel)
00565             newDur = syllableVec[syl].PhonVec()[pho].Dur() * wordChange/100;
00566           <font class="keywordflow">else</font> <font class="keywordflow">if</font>  ((*pP).<a class="code" href="class_phon.html#a38">Type</a>()==vowel)
00567             newDur = syllableVec[syl].PhonVec()[pho].Dur() * vowelChange/100;
00568           <font class="keywordflow">else</font>
00569             newDur = syllableVec[syl].PhonVec()[pho].Dur() * consChange/100;
00570           
00571           syllableVec[syl].PhonVec()[pho].changeDur(newDur, glob);
00572         }
00573       }
00574     }
00575   } <font class="keywordflow">else</font> {
00576     <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::changeSpeechRate: undefined method"</font>, -3);
00577   }
00578   <a class="code" href="class_phrase.html#c0">calcDur</a>();
00579   <font class="keywordflow">if</font> (glob.verbose)
00580     cerr &lt;&lt; <font class="stringliteral">"changed speechrate at "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" percent\n"</font>;
00581 }
</div></pre>    </td>
  </tr>
</table>
<a name="a24" doxytag="phrase::changeStressedAvrF0"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::changeStressedAvrF0 (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="util_h.html#a4">uint</a> <em>both</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
change mean pitch of stressed syllables.
<p>
All nonzero f0Vals get multiplied by &lt;rate&gt; in percent. The arg &lt;both&gt; decides whether word-accents are counted or not. The last <a class="el" href="class_syllable.html">syllable</a> is not affected (even if stressed), but has to be provided specially. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 both </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>00802                                                                     {
00803   <font class="keywordflow">if</font> (both) {
00804     <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size()-1; syl++) {
00805       <font class="keywordflow">if</font> (syllableVec[syl].Accent()==word || syllableVec[syl].Accent()==sentence) {
00806         <font class="comment">// cout &lt;&lt; syllableVec[syl].MeanF0() &lt;&lt; " ";</font>
00807         syllableVec[syl].changeMeanF0(rate);
00808         <font class="comment">// cout &lt;&lt; syllableVec[syl].MeanF0() &lt;&lt; "\n";</font>
00809         
00810       }
00811     }
00812   } <font class="keywordflow">else</font> { <font class="comment">// only sentence-accent</font>
00813     <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00814       <font class="keywordflow">if</font> (syllableVec[syl].Accent()==sentence) {
00815         syllableVec[syl].changeMeanF0(rate);
00816       }
00817     }      
00818   }
00819   <font class="keywordflow">if</font> (both)
00820     cerr &lt;&lt; <font class="stringliteral">"changed avr. F0 of all stressed syllables at "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" percent\n"</font>;
00821   <font class="keywordflow">else</font>
00822     cerr &lt;&lt; <font class="stringliteral">"changed avr. F0 of phrase-stressed syllables at "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" percent\n"</font>;      
00823   <a class="code" href="class_phrase.html#a1">calcMeanF0</a>();
00824 }
</div></pre>    </td>
  </tr>
</table>
<a name="a21" doxytag="phrase::changeStressedInt"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::changeStressedInt (
          </b></td>
          <td valign="bottom"><b>
int <em>dBVal</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="util_h.html#a4">uint</a> <em>both</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>globals</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
change intensity of stressed syllables.
<p>
The arg &lt;both&gt; decides whether word-accents are counted or not. The dBval is added to intensity of the vowels in the syllables, so it can be negative to lower the intensity. If the result'd become  negative, it's set to zero.  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>int</em>
&nbsp;</td><td>
 dBval </td></tr>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 both </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>00732                                                                   {
00733   <font class="keywordflow">if</font> (both) {
00734     <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size()-1; syl++) {
00735       <font class="keywordflow">if</font> (syllableVec[syl].Accent()==sentence) {
00736         syllableVec[syl].changeAvrInt(dBVal);
00737       }
00738       <font class="keywordflow">if</font> (syllableVec[syl].Accent()==word) {
00739         syllableVec[syl].changeAvrInt(dBVal/2);
00740       }
00741       
00742     }
00743   } <font class="keywordflow">else</font> { <font class="comment">// only sentence-accent</font>
00744     <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00745       <font class="keywordflow">if</font> (syllableVec[syl].Accent()==sentence) {
00746         syllableVec[syl].changeAvrInt(dBVal);
00747       }
00748     }      
00749   }
00750   <font class="keywordflow">if</font> (both)
00751     cerr &lt;&lt; <font class="stringliteral">"changed avr. intensuty of all stressed syllables at "</font>&lt;&lt;dBVal&lt;&lt;<font class="stringliteral">" dB\n"</font>;
00752   <font class="keywordflow">else</font>
00753     cerr &lt;&lt; <font class="stringliteral">"changed avr. intensity of phrase-stressed syllables at "</font>&lt;&lt;dBVal&lt;&lt;<font class="stringliteral">" dB\n"</font>;      
00754 }
</div></pre>    </td>
  </tr>
</table>
<a name="a27" doxytag="phrase::changeVariability"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::changeVariability (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
changes the F0-variability.
<p>
The f0-contour of each <a class="el" href="class_syllable.html">syllable</a> gets expanded or compressed with  the mean-f0 of the <a class="el" href="class_syllable.html">syllable</a> as reference.  <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>00881                                                        {
00882   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00883     syllableVec[syl].changeF0Range(rate, syllableVec[syl].<a class="code" href="class_phrase.html#a0">MeanF0</a>());
00884   }
00885   <font class="keywordflow">if</font> (glob.verbose)
00886     cerr &lt;&lt; <font class="stringliteral">"changed F0-variability at "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" percent\n"</font>;  
00887   <a class="code" href="class_phrase.html#a1">calcMeanF0</a>();
00888 }
</div></pre>    </td>
  </tr>
</table>
<a name="a38" doxytag="phrase::coarticulation"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::coarticulation (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="phon_h.html#a39">CO_TYPE</a> <em>coType</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
model coarticulation effects.
<p>
Each phone gets features added at the borders from the  neighboring phones, depending on coType:<ul>
<li>regressiv,<li>progrssive,<li>both.</ul>
results in very disturbed output up to now. <dl compact><dt>
<b><a class="el" href="todo.html#_todo000010">Todo: </a></b><dd>
find a better modelling with better smoothing.</dl> <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>CO_TYPE</em>
&nbsp;</td><td>
 coType </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>01421                                                                     {
01422   <a class="code" href="class_phon.html">phon</a> *pP;
01423   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01424     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01425       pP = &amp;syllableVec[syl].PhonVec()[pho];
01426       <a class="code" href="class_PHON_FEATURES.html">PHON_FEATURES</a> tmpPhonFeatures= (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>();
01427       tmpPhonFeatures.coarticulation = <font class="keyword">true</font>;
01428       tmpPhonFeatures.coarticulationRate = rate;
01429       tmpPhonFeatures.coarticulationType = coType;      
01430       (*pP).<a class="code" href="class_phon.html#a3">setPhonFeatures</a>(tmpPhonFeatures);
01431     }
01432   }     
01433   <font class="keywordflow">if</font>(glob.verbose)
01434     cerr &lt;&lt; <font class="stringliteral">"added coarticulation with rate: "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">"\n"</font>;
01435 }
</div></pre>    </td>
  </tr>
</table>
<a name="a37" doxytag="phrase::headSize"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::headSize (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
experiment: shift formant-values to model different head-sizes.
<p>
not really implemented yet. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>01396                                               {
01397   <a class="code" href="class_phon.html">phon</a> *pP;
01398   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01399     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01400       pP = &amp;syllableVec[syl].PhonVec()[pho];
01401       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a41">Voiced</a>()) {
01402         <a class="code" href="class_PHON_FEATURES.html">PHON_FEATURES</a> tmpPhonFeatures= (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>();
01403         tmpPhonFeatures.headSize = <font class="keyword">true</font>;
01404         tmpPhonFeatures.headSizeRate = rate;      
01405         (*pP).<a class="code" href="class_phon.html#a3">setPhonFeatures</a>(tmpPhonFeatures);
01406       }
01407     }
01408   }     
01409   <font class="keywordflow">if</font> (glob.verbose)
01410     cerr &lt;&lt;<font class="stringliteral">"changed head-size at rate: "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">"\n"</font>;
01411 }
</div></pre>    </td>
  </tr>
</table>
<a name="a16" doxytag="phrase::makeTest"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::makeTest (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>globals</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="util_h.html#a4">uint</a> <em>dur</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
fill a phrase with one <a class="el" href="class_syllable.html">syllable</a> with one phone of duration dur (in msec) with parameters taken from globals.
<p>
Useful for finding the right parameters for certain phones. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 duration of output in msec. </td></tr>
</table>
</dl><div class="fragment"><pre>00113                                                 {
00114   <a class="code" href="class_syllable.html">syllable</a> tmpSyl;
00115   <a class="code" href="class_phon.html">phon</a> tmpPhon(<font class="stringliteral">"_"</font>, dur, globals);
00116   tmpSyl.<a class="code" href="class_syllable.html#a2">addPhon</a>(tmpPhon);
00117   syllableVec.push_back(tmpSyl);
00118   <a class="code" href="class_phrase.html#c0">calcDur</a>();
00119 }
</div></pre>    </td>
  </tr>
</table>
<a name="a9" doxytag="phrase::modelFeatures"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::modelFeatures (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="class_globalsT.html">globalsT</a> &amp; <em>kg</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
model voice-source and articulation-tract filter parameters for each phone according to it's assigned features.
<p>
sets bool xxxDyn true: i.e. all changung parmaters are  marked to be dynamic. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>00145                                             {
00146   <a class="code" href="class_phon.html">phon</a> *pP, *nextpP, *prevpP=NULL;
00147 
00148   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00149     uint sylMeanF0 = syllableVec[syl].MeanF0();
00150     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
00151       <font class="keywordflow">if</font> (pho==syllableVec[syl].PhonNum()-1)
00152         <font class="keywordflow">if</font> (syl==syllableVec.size()-1) 
00153           nextpP = NULL;
00154         <font class="keywordflow">else</font>
00155           nextpP = &amp;(syllableVec[syl+1].PhonVec()[0]);
00156       <font class="keywordflow">else</font>
00157         nextpP = &amp;(syllableVec[syl].PhonVec()[pho+1]);
00158 
00159       pP =  &amp;(syllableVec[syl].PhonVec()[pho]);
00160       (*pP).<a class="code" href="class_phon.html#a118">modelFeatures</a>(sylMeanF0, globals, prevpP, nextpP);
00161       prevpP = pP;
00162     }
00163   }
00164 }
</div></pre>    </td>
  </tr>
</table>
<a name="a8" doxytag="phrase::modelKlattParameters"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::modelKlattParameters (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="class_globalsT.html">globalsT</a> &amp; <em>globals</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
model voice-source and articulation-tract filter parameters for each phone for normal voice.
<p>
They can later be overwritten  by modelFeatures. sideeffect: sets bool xxxDyn true: i.e. all changung parmaters are  marked to be dynamic. <dl compact><dt>
<b>See also: </b><dd>
 <a class="el" href="class_phrase.html#a9">modelFeatures</a>() </dl><dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>00134                                                    {
00135   <a class="code" href="class_phon.html">phon</a> *tmpPhonP;
00136   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00137     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
00138       tmpPhonP =  &amp;(syllableVec[syl].PhonVec()[pho]);
00139       (*tmpPhonP).<a class="code" href="class_phon.html#a116">setSoundSource</a>(globals);
00140       (*tmpPhonP).<a class="code" href="class_phon.html#a117">setArticulationTractFilter</a>(globals);
00141     }
00142   }
00143 }
</div></pre>    </td>
  </tr>
</table>
<a name="a33" doxytag="phrase::overshootVowels"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::overshootVowels (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="syllable_h.html#a3">ACCENT_TYPE</a> <em>accent</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
enhance the vowel precision.
<p>
All formantVals in f1 and f2 of vowels in syllables with accent get displaced away from the center freqencies by adding the  percentage by rate and distance to center frequency.<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>ACCENT_TYPE</em>
&nbsp;</td><td>
 accent </td></tr>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>01327                                                                          {
01328   <a class="code" href="class_phon.html">phon</a> *pP;
01329   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01330     <font class="keywordflow">if</font> (syllableVec[syl].Accent()==accent) {
01331       <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01332         pP = &amp;syllableVec[syl].PhonVec()[pho];
01333         <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a38">Type</a>()==vowel) { <font class="comment">// &amp;&amp; ! (*pP).Diphtong()) {</font>
01334           <a class="code" href="class_PHON_FEATURES.html">PHON_FEATURES</a> tmpPhonFeatures= (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>();
01335           tmpPhonFeatures.overshoot = <font class="keyword">true</font>;
01336           tmpPhonFeatures.overshootRate = rate;
01337           (*pP).<a class="code" href="class_phon.html#a3">setPhonFeatures</a>(tmpPhonFeatures);
01338         }
01339       }
01340     }
01341   }
01342   <font class="keywordflow">if</font> (glob.verbose)
01343     cerr &lt;&lt; <font class="stringliteral">"added overshoot at "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" for accent-type: "</font>&lt;&lt;(uint)accent&lt;&lt;<font class="stringliteral">"\n"</font>;
01344 }
</div></pre>    </td>
  </tr>
</table>
<a name="a14" doxytag="phrase::printKlattFile"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::printKlattFile (
          </b></td>
          <td valign="bottom"><b>
ostream &amp; <em>outFile</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
prints klatt-file (iles&amp;simmons-format).
<p>
If used, the bool sensyn in the global paramters should be false. <dl compact><dt>
<b>See also: </b><dd>
 <a class="el" href="class_phrase.html#a15">printSenSynFile</a>() </dl><dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>ostream</em>
&nbsp;</td><td>
 &amp;outFile </td></tr>
</table>
</dl><div class="fragment"><pre>00121                                             {
00122   outFile &lt;&lt;  <font class="stringliteral">"# parameter file for the klatt-formant speech-synthesizer, implementation of iles &amp; simmons, (version with comments possible!) \n"</font>;
00123   outFile &lt;&lt;  <font class="stringliteral">"# generated by emoSyn - speechsynthesizer-frontend for emotional speech, author felixbur@kgw.tu-berlin.de\n"</font>;
00124   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00125     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
00126       outFile &lt;&lt;  <font class="stringliteral">"# name of phone: "</font> &lt;&lt; syllableVec[syl].PhonVec()[pho].Name() &lt;&lt; <font class="stringliteral">"\n"</font>;
00127       outFile &lt;&lt;  <font class="stringliteral">"# meaning of parameters: \n"</font>;
00128       outFile &lt;&lt;  <font class="stringliteral">"# f0 av f1 b1 f2 b2 f3 b3 f4 b4 f5 b5 f6 b6 fnz bnz fnp bnp asp kopen aturb tilt af skew a1 b1p a2 b2p a3 b3p a4 b4p a5 b5p a6 b6p anp ab avp gain\n# values:\n"</font>;
00129       syllableVec[syl].PhonVec()[pho].printKlattFrames(outFile);
00130     }
00131   }
00132 }
</div></pre>    </td>
  </tr>
</table>
<a name="a13" doxytag="phrase::printLabelFile"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::printLabelFile (
          </b></td>
          <td valign="bottom"><b>
ostream &amp; <em>outFile</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>globals</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
prints label-file (esps-format).
<p>
<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>ostream</em>
&nbsp;</td><td>
 &amp;outFile  </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>00200                                                               {
00201   <font class="keywordtype">double</font> time=0;  
00202   <a class="code" href="class_phon.html">phon</a> *pP;
00203 
00204   outFile &lt;&lt; <font class="stringliteral">"signal emoSyn-output\n"</font>;
00205   outFile &lt;&lt; <font class="stringliteral">"type 0\n"</font>;
00206   outFile &lt;&lt; <font class="stringliteral">"comment created by emoSyn\n"</font>;
00207   outFile &lt;&lt; <font class="stringliteral">"font -misc-*-bold-*-*-*-15-*-*-*-*-*-*-*\n"</font>;
00208   outFile &lt;&lt; <font class="stringliteral">"separator ;\n"</font>;
00209   outFile &lt;&lt; <font class="stringliteral">"nfields 1\n"</font>;
00210   outFile &lt;&lt; <font class="stringliteral">"#\n"</font>;
00211   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00212     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
00213       pP = &amp;syllableVec[syl].PhonVec()[pho];
00214       outFile &lt;&lt; <font class="stringliteral">"\t"</font> &lt;&lt; time &lt;&lt; <font class="stringliteral">"\t-1 "</font>;
00215       outFile &lt;&lt; (*pP).<a class="code" href="class_phon.html#a37">Name</a>();
00216       outFile &lt;&lt; <font class="stringliteral">"\n"</font>; 
00217       <font class="comment">// print features: overshoot, undershoot</font>
00218       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>().overshoot) {
00219         outFile &lt;&lt; <font class="stringliteral">"\t"</font> &lt;&lt; time &lt;&lt; <font class="stringliteral">"\t-1 "</font> &lt;&lt; <font class="stringliteral">"+overshoot\n"</font>;  
00220       } 
00221       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>().undershoot) {
00222         outFile &lt;&lt; <font class="stringliteral">"\t"</font> &lt;&lt; time &lt;&lt; <font class="stringliteral">"\t-1 "</font> &lt;&lt; <font class="stringliteral">"+undershoot\n"</font>;  
00223       } 
00224       <font class="comment">// print features: breathy</font>
00225       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>().breathy) {
00226         <font class="keywordtype">double</font> bS = (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>().brtStart*(<font class="keywordtype">double</font>) globals.ui / 1000;
00227         outFile &lt;&lt; <font class="stringliteral">"\t"</font> &lt;&lt; time + bS &lt;&lt; <font class="stringliteral">"\t-1 "</font> &lt;&lt; <font class="stringliteral">"+brt\n"</font>;
00228         <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>().brtStop &lt; (*pP).<a class="code" href="class_phon.html#a44">Dur</a>()) {
00229           <font class="keywordtype">double</font> bE = (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>().brtStop*(<font class="keywordtype">double</font>) globals.ui / 1000;
00230           outFile &lt;&lt; <font class="stringliteral">"\t"</font> &lt;&lt; time + bE &lt;&lt; <font class="stringliteral">"\t-1 "</font> &lt;&lt; <font class="stringliteral">"-brt\n"</font>;  
00231         }
00232       }
00233       <font class="comment">// print features: voiced      </font>
00234       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>().voiced) {
00235         <font class="keywordflow">if</font> (!(*pP).<a class="code" href="class_phon.html#a41">Voiced</a>()) {
00236           <font class="keywordtype">double</font> vS = (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>().vocStart*(<font class="keywordtype">double</font>) globals.ui / 1000;      
00237           outFile &lt;&lt; <font class="stringliteral">"\t"</font> &lt;&lt; time + vS &lt;&lt; <font class="stringliteral">"\t-1 "</font> &lt;&lt; <font class="stringliteral">"+voc\n"</font>;
00238           <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>().vocStop &lt; (*pP).<a class="code" href="class_phon.html#a44">Dur</a>()) {
00239             <font class="keywordtype">double</font> vE = (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>().vocStop*(<font class="keywordtype">double</font>) globals.ui / 1000;
00240             outFile &lt;&lt; <font class="stringliteral">"\t"</font> &lt;&lt; time + vE &lt;&lt; <font class="stringliteral">"\t-1 "</font> &lt;&lt; <font class="stringliteral">"-voc\n"</font>;  
00241           }
00242         } <font class="keywordflow">else</font> {
00243           <font class="keywordtype">double</font> vE = (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>().vocStop*(<font class="keywordtype">double</font>) globals.ui / 1000;       
00244           outFile &lt;&lt; <font class="stringliteral">"\t"</font> &lt;&lt; time + vE &lt;&lt; <font class="stringliteral">"\t-1 "</font> &lt;&lt; <font class="stringliteral">"-voc\n"</font>;
00245           <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>().vocStart &lt; (*pP).<a class="code" href="class_phon.html#a44">Dur</a>()) {
00246             <font class="keywordtype">double</font> vS = (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>().vocStart*(<font class="keywordtype">double</font>) globals.ui / 1000;    
00247             outFile &lt;&lt; <font class="stringliteral">"\t"</font> &lt;&lt; time + vS &lt;&lt; <font class="stringliteral">"\t-1 "</font> &lt;&lt; <font class="stringliteral">"+voc\n"</font>;  
00248           }
00249         }
00250       }
00251       <font class="comment">// print features: laryngealized</font>
00252       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>().creaky) {
00253         <font class="keywordtype">double</font> bS = (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>().creakyStart*(<font class="keywordtype">double</font>) globals.ui / 1000;
00254         outFile &lt;&lt; <font class="stringliteral">"\t"</font> &lt;&lt; time + bS &lt;&lt; <font class="stringliteral">"\t-1 "</font> &lt;&lt; <font class="stringliteral">"+lar\n"</font>;
00255         <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>().creakyStop &lt; (*pP).<a class="code" href="class_phon.html#a44">Dur</a>()) {
00256           <font class="keywordtype">double</font> bE = (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>().creakyStop*(<font class="keywordtype">double</font>) globals.ui / 1000;
00257           outFile &lt;&lt; <font class="stringliteral">"\t"</font> &lt;&lt; time + bE &lt;&lt; <font class="stringliteral">"\t-1 "</font> &lt;&lt; <font class="stringliteral">"-lar\n"</font>;  
00258         }
00259       }
00260       time += (<font class="keywordtype">double</font>) (*pP).<a class="code" href="class_phon.html#a44">Dur</a>()/1000;
00261     }
00262   }
00263   outFile &lt;&lt; <font class="stringliteral">"\n"</font>; 
00264 }
</div></pre>    </td>
  </tr>
</table>
<a name="a12" doxytag="phrase::printPhoFile"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::printPhoFile (
          </b></td>
          <td valign="bottom"><b>
ostream &amp; <em>outFile</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
prints pho-file (mbrola-format).
<p>
It's used for resynthesis. If the global parameter copyDB is true, the <a class="el" href="class_syllable.html">syllable</a> borders get printed as well. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>ostream</em>
&nbsp;</td><td>
 &amp;outFile  </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>00166                                                          {
00167   vector&lt;uint&gt; tmpF0ValVec(0);
00168   vector&lt;uint&gt; tmpF0TimeVec(0);
00169   <a class="code" href="class_phon.html">phon</a> *pP;
00170   uint time;
00171   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00172     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
00173       pP = &amp;syllableVec[syl].PhonVec()[pho];
00174       <font class="keywordflow">if</font> (glob.copyDB) {
00175         outFile &lt;&lt; (*pP).<a class="code" href="class_phon.html#a37">Name</a>() &lt;&lt; <font class="stringliteral">" "</font>;
00176         outFile &lt;&lt; (*pP).<a class="code" href="class_phon.html#a44">Dur</a>() &lt;&lt; <font class="stringliteral">" "</font>;
00177         <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a41">Voiced</a>()) {
00178           <font class="keywordflow">for</font> (uint f0Val=0; f0Val&lt;(*pP).<a class="code" href="class_phon.html#a51">F0Vec</a>().size();f0Val++) {
00179             time = f0Val*(100/(*pP).<a class="code" href="class_phon.html#a51">F0Vec</a>().size());
00180             outFile &lt;&lt; time &lt;&lt; <font class="stringliteral">" "</font> &lt;&lt; (*pP).<a class="code" href="class_phon.html#a51">F0Vec</a>()[f0Val]/10 &lt;&lt; <font class="stringliteral">" "</font>;
00181           }
00182         }
00183       } <font class="keywordflow">else</font> { 
00184         tmpF0ValVec =  (*pP).<a class="code" href="class_phon.html#a48">F0ValVec</a>();
00185         tmpF0TimeVec = (*pP).<a class="code" href="class_phon.html#a49">F0TimeVec</a>();
00186         outFile &lt;&lt; (*pP).<a class="code" href="class_phon.html#a37">Name</a>() &lt;&lt; <font class="stringliteral">" "</font>;
00187         outFile &lt;&lt; (*pP).<a class="code" href="class_phon.html#a44">Dur</a>() &lt;&lt; <font class="stringliteral">" "</font>;
00188         <font class="keywordflow">for</font> (uint f0Val=0; f0Val&lt;(*pP).<a class="code" href="class_phon.html#a45">FrameNum</a>();f0Val++)
00189           outFile &lt;&lt; tmpF0TimeVec[f0Val] &lt;&lt; <font class="stringliteral">" "</font>
00190                   &lt;&lt; tmpF0ValVec[f0Val]*10 &lt;&lt; <font class="stringliteral">" "</font>;
00191       }
00192       outFile &lt;&lt; <font class="stringliteral">"\n"</font>; 
00193     }
00194     <font class="keywordflow">if</font> (glob.copyDB)
00195       outFile &lt;&lt; <font class="stringliteral">"- "</font> &lt;&lt; (<font class="keywordtype">int</font>) syllableVec[syl].Accent() &lt;&lt; <font class="stringliteral">"\n"</font>; 
00196   }
00197   outFile &lt;&lt; <font class="stringliteral">"\n"</font>; 
00198 }
</div></pre>    </td>
  </tr>
</table>
<a name="a11" doxytag="phrase::printPhonFeatures"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::printPhonFeatures (
          </b></td>
          <td valign="bottom"><b>
ostream &amp; <em>outFile</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
prints phonfeatures to outFile (debugging).
<p>
<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>ostream</em>
&nbsp;</td><td>
 &amp;outFile </td></tr>
</table>
</dl><div class="fragment"><pre>00089                                                {
00090   <a class="code" href="class_phon.html">phon</a> *pP;
00091   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00092     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
00093       pP = &amp;syllableVec[syl].PhonVec()[pho];
00094       outFile &lt;&lt;  (*pP).<a class="code" href="class_phon.html#a37">Name</a>() &lt;&lt; <font class="stringliteral">" "</font> &lt;&lt; (*pP).<a class="code" href="class_phon.html#a42">Diphtong</a>() &lt;&lt; <font class="stringliteral">"\n"</font>; 
00095         <font class="comment">//tmpPhonFeatures.voiced &lt;&lt; "\n";     </font>
00096     } 
00097   }
00098 }
</div></pre>    </td>
  </tr>
</table>
<a name="a10" doxytag="phrase::printPhonMeanF0"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::printPhonMeanF0 (
          </b></td>
          <td valign="bottom"><b>
ostream &amp; <em>outFile</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
prints means of f0-contour per <a class="el" href="class_phon.html">phon</a> to outFile (debugging).
<p>
<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>ostream</em>
&nbsp;</td><td>
 &amp;outFile </td></tr>
</table>
</dl><div class="fragment"><pre>00101                                              {
00102   vector&lt;phon&gt; tmpPhonVec;  
00103   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00104     tmpPhonVec = syllableVec[syl].PhonVec();
00105     <font class="keywordflow">for</font> (uint pho=0; pho&lt;tmpPhonVec.size(); pho++) {      
00106       outFile &lt;&lt; tmpPhonVec[pho].MeanF0() &lt;&lt; <font class="stringliteral">" "</font>;
00107     }
00108     outFile &lt;&lt; <font class="stringliteral">"\t"</font>; 
00109   }
00110   outFile &lt;&lt; <font class="stringliteral">"\n"</font>; 
00111 }
</div></pre>    </td>
  </tr>
</table>
<a name="a15" doxytag="phrase::printSenSynFile"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::printSenSynFile (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>globals</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
ostream &amp; <em>outFile</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
prints klatt-file (sensymetrics-format).
<p>
If used, the bool sensyn in the global paramters should be true. <dl compact><dt>
<b>See also: </b><dd>
 <a class="el" href="class_phrase.html#a14">printKlattFile</a>() </dl><dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
<tr><td valign=top><em>ostream</em>
&nbsp;</td><td>
 &amp;outFile </td></tr>
</table>
</dl><div class="fragment"><pre>01667                                                             {
01668   uint start=0;
01669   outFile &lt;&lt;  <font class="stringliteral">"parameter file for the klatt-formant speech-synthesizer\n implementation: sensyn, sensimetrics coorp. \n"</font>;
01670   outFile &lt;&lt;  <font class="stringliteral">"generated by emoSyn\n - speechsynthesizer-frontend for emotional speech,\n author felixbur@globw.tu-berlin.de\n"</font>;
01671   outFile &lt;&lt;  <font class="stringliteral">"6\n7\n8\n9\n"</font>;
01672   outFile &lt;&lt;  <font class="stringliteral">"60 parameters\n"</font>;
01673   outFile &lt;&lt;  <font class="stringliteral">"11\n12\n13\n"</font>;
01674 
01675   outFile &lt;&lt;  <font class="stringliteral">"DU   C   30   "</font>&lt;&lt;dur&lt;&lt;<font class="stringliteral">"  5000 Duration of the utterance, in msec\n"</font>;
01676   outFile &lt;&lt;  <font class="stringliteral">"UI   C    1     "</font>&lt;&lt;glob.ui&lt;&lt;<font class="stringliteral">"    20  Update interval for parameter reset, in msec\n"</font>;
01677   outFile &lt;&lt;  <font class="stringliteral">"SR   C 5000 "</font>&lt;&lt;glob.sr&lt;&lt;<font class="stringliteral">" 20000  Output sampling rate, in samples/sec\n"</font>;
01678   outFile &lt;&lt;  <font class="stringliteral">"NF   C    1     "</font>&lt;&lt;glob.nf&lt;&lt;<font class="stringliteral">"     6  Number of formants in cascade branch\n"</font>;
01679   outFile &lt;&lt;  <font class="stringliteral">"SS   C    1     "</font>&lt;&lt;glob.ss&lt;&lt;<font class="stringliteral">"     3  Source switch (1=impulse, 2=natural, 3=LF model)\n"</font>;
01680   outFile &lt;&lt;  <font class="stringliteral">"RS   C    1     "</font>&lt;&lt;glob.rs&lt;&lt;<font class="stringliteral">"  8191  Random seed (initial value of random # generator)\n"</font>;
01681   outFile &lt;&lt;  <font class="stringliteral">"SB   C    0     "</font>&lt;&lt;glob.sb&lt;&lt;<font class="stringliteral">"     1  Same noise burst, reset RS if AF=AH=0, 0=no,1=yes\n"</font>;
01682   outFile &lt;&lt;  <font class="stringliteral">"CP   C    0     "</font>&lt;&lt;glob.cp&lt;&lt;<font class="stringliteral">"     1  0=Cascade, 1=Parallel tract excitation by AV\n"</font>;
01683   outFile &lt;&lt;  <font class="stringliteral">"OS   C    0     "</font>&lt;&lt;glob.os&lt;&lt;<font class="stringliteral">"    20  Output selector (0=normal,1=voicing source,...)\n"</font>;
01684   outFile &lt;&lt;  <font class="stringliteral">"GV   C    0    "</font>&lt;&lt;glob.gv&lt;&lt;<font class="stringliteral">"    80  Overall gain scale factor for AV, in dB\n"</font>;
01685   outFile &lt;&lt;  <font class="stringliteral">"GH   C    0    "</font>&lt;&lt;glob.gh&lt;&lt;<font class="stringliteral">"    80  Overall gain scale factor for AH, in dB\n"</font>;
01686   outFile &lt;&lt;  <font class="stringliteral">"GF   C    0    "</font>&lt;&lt;glob.gf&lt;&lt;<font class="stringliteral">"    80  Overall gain scale factor for AF, in dB\n"</font>;
01687   <font class="keywordflow">if</font> (glob.f0Dyn) 
01688     outFile &lt;&lt;  <font class="stringliteral">"F0   V    0  "</font>&lt;&lt;glob.f0&lt;&lt;<font class="stringliteral">"  5000  Fundamental frequency, in tenths of a Hz\n"</font>;
01689   <font class="keywordflow">else</font>
01690     outFile &lt;&lt;  <font class="stringliteral">"F0   v    0  "</font>&lt;&lt;glob.f0&lt;&lt;<font class="stringliteral">"  5000  Fundamental frequency, in tenths of a Hz\n"</font>;
01691   <font class="keywordflow">if</font> (glob.avDyn)
01692     outFile &lt;&lt;  <font class="stringliteral">"AV   V    0    "</font>&lt;&lt;glob.av&lt;&lt;<font class="stringliteral">"    80  Amplitude of voicing, in dB\n"</font>;
01693   <font class="keywordflow">else</font>
01694     outFile &lt;&lt;  <font class="stringliteral">"AV   v    0    "</font>&lt;&lt;glob.av&lt;&lt;<font class="stringliteral">"    80  Amplitude of voicing, in dB\n"</font>; 
01695   <font class="keywordflow">if</font> (glob.oqDyn)
01696     outFile &lt;&lt;  <font class="stringliteral">"OQ   V   10    "</font>&lt;&lt;glob.oq&lt;&lt;<font class="stringliteral">"    99  Open quotient (voicing open-time/period), in %\n"</font>;
01697   <font class="keywordflow">else</font>
01698     outFile &lt;&lt;  <font class="stringliteral">"OQ   v   10    "</font>&lt;&lt;glob.oq&lt;&lt;<font class="stringliteral">"    99  Open quotient (voicing open-time/period), in %\n"</font>;
01699   <font class="keywordflow">if</font> (glob.sqDyn)
01700     outFile &lt;&lt;  <font class="stringliteral">"SQ   V  100   "</font>&lt;&lt;glob.sq&lt;&lt;<font class="stringliteral">"   500  Speed quotient (rise/fall time, LF model), in %\n"</font>;
01701   <font class="keywordflow">else</font>
01702     outFile &lt;&lt;  <font class="stringliteral">"SQ   v  100   "</font>&lt;&lt;glob.sq&lt;&lt;<font class="stringliteral">"   500  Speed quotient (rise/fall time, LF model), in %\n"</font>;
01703   <font class="keywordflow">if</font> (glob.tlDyn)
01704     outFile &lt;&lt;  <font class="stringliteral">"TL   V    0     "</font>&lt;&lt;glob.tl&lt;&lt;<font class="stringliteral">"    41  Extra tilt of voicing spectrum, dB down @ 3 kHz\n"</font>;
01705   <font class="keywordflow">else</font>
01706     outFile &lt;&lt;  <font class="stringliteral">"TL   v    0     "</font>&lt;&lt;glob.tl&lt;&lt;<font class="stringliteral">"    41  Extra tilt of voicing spectrum, dB down @ 3 kHz\n"</font>;
01707   <font class="keywordflow">if</font> (glob.flDyn)
01708     outFile &lt;&lt;  <font class="stringliteral">"FL   V    0     "</font>&lt;&lt;glob.fl&lt;&lt;<font class="stringliteral">"   100  Flutter (random fluct in f0), in % of maximum\n"</font>;
01709   <font class="keywordflow">else</font>
01710     outFile &lt;&lt;  <font class="stringliteral">"FL   v    0     "</font>&lt;&lt;glob.fl&lt;&lt;<font class="stringliteral">"   100  Flutter (random fluct in f0), in % of maximum\n"</font>;  
01711   <font class="keywordflow">if</font> (glob.diDyn) 
01712     outFile &lt;&lt;  <font class="stringliteral">"DI   V    0     "</font>&lt;&lt;glob.di&lt;&lt;<font class="stringliteral">"   100  Diplophonia (alt periods closer), in % of max\n"</font>;
01713   <font class="keywordflow">else</font>
01714     outFile &lt;&lt;  <font class="stringliteral">"DI   v    0     "</font>&lt;&lt;glob.di&lt;&lt;<font class="stringliteral">"   100  Diplophonia (alt periods closer), in % of max\n"</font>;
01715   <font class="keywordflow">if</font> (glob.ahDyn)
01716     outFile &lt;&lt;  <font class="stringliteral">"AH   V    0     "</font>&lt;&lt;glob.ah&lt;&lt;<font class="stringliteral">"    80  Amplitude of aspiration, in dB\n"</font>;
01717   <font class="keywordflow">else</font>
01718     outFile &lt;&lt;  <font class="stringliteral">"AH   v    0     "</font>&lt;&lt;glob.ah&lt;&lt;<font class="stringliteral">"    80  Amplitude of aspiration, in dB\n"</font>;
01719   <font class="keywordflow">if</font> (glob.afDyn)
01720     outFile &lt;&lt;  <font class="stringliteral">"AF   V    0     "</font>&lt;&lt;glob.af&lt;&lt;<font class="stringliteral">"    80  Amplitude of frication, in dB\n"</font>;
01721   <font class="keywordflow">else</font>
01722     outFile &lt;&lt;  <font class="stringliteral">"AF   v    0     "</font>&lt;&lt;glob.af&lt;&lt;<font class="stringliteral">"    80  Amplitude of frication, in dB\n"</font>;
01723   <font class="keywordflow">if</font> (glob.f1Dyn)
01724     outFile &lt;&lt;  <font class="stringliteral">"F1   V  180   "</font>&lt;&lt;glob.f1&lt;&lt;<font class="stringliteral">"  1300  Frequency of 1st formant, in Hz\n"</font>;
01725   <font class="keywordflow">else</font>
01726     outFile &lt;&lt;  <font class="stringliteral">"F1   v  180   "</font>&lt;&lt;glob.f1&lt;&lt;<font class="stringliteral">"  1300  Frequency of 1st formant, in Hz\n"</font>;
01727   <font class="keywordflow">if</font> (glob.b1Dyn) 
01728     outFile &lt;&lt;  <font class="stringliteral">"B1   V   30    "</font>&lt;&lt;glob.b1&lt;&lt;<font class="stringliteral">"  1000  Bandwidth of 1st formant, in Hz\n"</font>;
01729   <font class="keywordflow">else</font>
01730     outFile &lt;&lt;  <font class="stringliteral">"B1   v   30    "</font>&lt;&lt;glob.b1&lt;&lt;<font class="stringliteral">"  1000  Bandwidth of 1st formant, in Hz\n"</font>;
01731   <font class="keywordflow">if</font> (glob.df1Dyn)
01732     outFile &lt;&lt;  <font class="stringliteral">"DF1  V    0     "</font>&lt;&lt;glob.df1&lt;&lt;<font class="stringliteral">"   100  Change in F1 during open portion of period, in Hz\n"</font>;
01733   <font class="keywordflow">else</font>
01734     outFile &lt;&lt;  <font class="stringliteral">"DF1  v    0     "</font>&lt;&lt;glob.df1&lt;&lt;<font class="stringliteral">"   100  Change in F1 during open portion of period, in Hz\n"</font>;
01735   <font class="keywordflow">if</font> (glob.db1Dyn)
01736     outFile &lt;&lt;  <font class="stringliteral">"DB1  V    0     "</font>&lt;&lt;glob.db1&lt;&lt;<font class="stringliteral">"   400  Change in B1 during open portion of period, in Hz\n"</font>;
01737   <font class="keywordflow">else</font>
01738     outFile &lt;&lt;  <font class="stringliteral">"DB1  v    0     "</font>&lt;&lt;glob.db1&lt;&lt;<font class="stringliteral">"   400  Change in B1 during open portion of period, in Hz\n"</font>;
01739   <font class="keywordflow">if</font> (glob.f2Dyn)
01740     outFile &lt;&lt;  <font class="stringliteral">"F2   V  550  "</font>&lt;&lt;glob.f2&lt;&lt;<font class="stringliteral">"  3000  Frequency of 2nd formant, in Hz\n"</font>;
01741   <font class="keywordflow">else</font>
01742     outFile &lt;&lt;  <font class="stringliteral">"F2   v  550  "</font>&lt;&lt;glob.f2&lt;&lt;<font class="stringliteral">"  3000  Frequency of 2nd formant, in Hz\n"</font>;
01743   <font class="keywordflow">if</font> (glob.b2Dyn)
01744     outFile &lt;&lt;  <font class="stringliteral">"B2   V   40   "</font>&lt;&lt;glob.b2&lt;&lt;<font class="stringliteral">"  90   Bandwidth of 2nd formant, in Hz\n"</font>;
01745   <font class="keywordflow">else</font>
01746     outFile &lt;&lt;  <font class="stringliteral">"B2   v   40  "</font>&lt;&lt;glob.b2&lt;&lt;<font class="stringliteral">"  90    Bandwidth of 2nd formant, in Hz\n"</font>;
01747   <font class="keywordflow">if</font> (glob.f3Dyn)
01748     outFile &lt;&lt;  <font class="stringliteral">"F3   V 1200 "</font>&lt;&lt;glob.f3&lt;&lt;<font class="stringliteral">" 2500    Frequency of 3rd formant, in Hz\n"</font>;
01749   <font class="keywordflow">else</font> 
01750     outFile &lt;&lt;  <font class="stringliteral">"F3   v 1200 "</font>&lt;&lt;glob.f3&lt;&lt;<font class="stringliteral">"  2500   Frequency of 3rd formant, in Hz\n"</font>;
01751   <font class="keywordflow">if</font> (glob.b3Dyn)
01752     outFile &lt;&lt;  <font class="stringliteral">"B3   V   60  "</font>&lt;&lt;glob.b3&lt;&lt;<font class="stringliteral">"   150  Bandwidth of 3rd formant, in Hz\n"</font>;
01753   <font class="keywordflow">else</font>
01754     outFile &lt;&lt;  <font class="stringliteral">"B3   v   60 "</font>&lt;&lt;glob.b3&lt;&lt;<font class="stringliteral">"   150   Bandwidth of 3rd formant, in Hz\n"</font>;
01755   <font class="keywordflow">if</font> (glob.f4Dyn)    
01756     outFile &lt;&lt;  <font class="stringliteral">"F4   V 2400  "</font>&lt;&lt;glob.f4&lt;&lt;<font class="stringliteral">"  4990  Frequency of 4th formant, in Hz\n"</font>;
01757   <font class="keywordflow">else</font>
01758     outFile &lt;&lt;  <font class="stringliteral">"F4   v 2400  "</font>&lt;&lt;glob.f4&lt;&lt;<font class="stringliteral">"  4990  Frequency of 4th formant, in Hz\n"</font>;
01759   <font class="keywordflow">if</font> (glob.b4Dyn)
01760     outFile &lt;&lt;  <font class="stringliteral">"B4   V  100   "</font>&lt;&lt;glob.b4&lt;&lt;<font class="stringliteral">"  1000  Bandwidth of 4th formant, in Hz\n"</font>;
01761   <font class="keywordflow">else</font>
01762     outFile &lt;&lt;  <font class="stringliteral">"B4   v  100   "</font>&lt;&lt;glob.b4&lt;&lt;<font class="stringliteral">"  1000  Bandwidth of 4th formant, in Hz\n"</font>;
01763   <font class="keywordflow">if</font> (glob.f5Dyn)
01764     outFile &lt;&lt;  <font class="stringliteral">"F5   V 3000  "</font>&lt;&lt;glob.f5&lt;&lt;<font class="stringliteral">"  4990  Frequency of 5th formant, in Hz\n"</font>;
01765   <font class="keywordflow">else</font>
01766     outFile &lt;&lt;  <font class="stringliteral">"F5   v 3000  "</font>&lt;&lt;glob.f5&lt;&lt;<font class="stringliteral">"  4990  Frequency of 5th formant, in Hz\n"</font>;
01767   <font class="keywordflow">if</font> (glob.b5Dyn)
01768     outFile &lt;&lt;  <font class="stringliteral">"B5   V  100   "</font>&lt;&lt;glob.b5&lt;&lt;<font class="stringliteral">"  1500  Bandwidth of 5th formant, in Hz\n"</font>;
01769   <font class="keywordflow">else</font>
01770     outFile &lt;&lt;  <font class="stringliteral">"B5   v  100   "</font>&lt;&lt;glob.b5&lt;&lt;<font class="stringliteral">"  1500  Bandwidth of 5th formant, in Hz\n"</font>;
01771   <font class="keywordflow">if</font> (glob.f6Dyn)
01772     outFile &lt;&lt;  <font class="stringliteral">"F6   V 3000  "</font>&lt;&lt;glob.f6&lt;&lt;<font class="stringliteral">"  4990  Frequency of 6th formant, in Hz (applies if NF=6)\n"</font>;
01773   <font class="keywordflow">else</font>
01774     outFile &lt;&lt;  <font class="stringliteral">"F6   v 3000  "</font>&lt;&lt;glob.f6&lt;&lt;<font class="stringliteral">"  4990  Frequency of 6th formant, in Hz (applies if NF=6)\n"</font>;
01775   <font class="keywordflow">if</font> (glob.b6Dyn)
01776     outFile &lt;&lt;  <font class="stringliteral">"B6   V  100   "</font>&lt;&lt;glob.b6&lt;&lt;<font class="stringliteral">"  4000  Bandwidth of 6th formant, in Hz (applies if NF=6)\n"</font>;
01777   <font class="keywordflow">else</font>
01778     outFile &lt;&lt;  <font class="stringliteral">"B6   v  100   "</font>&lt;&lt;glob.b6&lt;&lt;<font class="stringliteral">"  4000  Bandwidth of 6th formant, in Hz (applies if NF=6)\n"</font>;
01779   <font class="keywordflow">if</font> (glob.fnpDyn)
01780     outFile &lt;&lt;  <font class="stringliteral">"FNP  V  180   "</font>&lt;&lt;glob.fnp&lt;&lt;<font class="stringliteral">"  2000  Frequency of nasal pole, in Hz\n"</font>;
01781   <font class="keywordflow">else</font>
01782     outFile &lt;&lt;  <font class="stringliteral">"FNP  v  180   "</font>&lt;&lt;glob.fnp&lt;&lt;<font class="stringliteral">"  2000  Frequency of nasal pole, in Hz\n"</font>;
01783   <font class="keywordflow">if</font> (glob.bnpDyn)
01784     outFile &lt;&lt;  <font class="stringliteral">"BNP  V   40    "</font>&lt;&lt;glob.bnp&lt;&lt;<font class="stringliteral">"  1000  Bandwidth of nasal pole, in Hz\n"</font>;
01785   <font class="keywordflow">else</font>
01786     outFile &lt;&lt;  <font class="stringliteral">"BNP  v   40    "</font>&lt;&lt;glob.bnp&lt;&lt;<font class="stringliteral">"  1000  Bandwidth of nasal pole, in Hz\n"</font>;
01787   <font class="keywordflow">if</font> (glob.fnzDyn)
01788     outFile &lt;&lt;  <font class="stringliteral">"FNZ  V  180   "</font>&lt;&lt;glob.fnz&lt;&lt;<font class="stringliteral">"  2000  Frequency of nasal zero, in Hz\n"</font>;
01789   <font class="keywordflow">else</font>
01790     outFile &lt;&lt;  <font class="stringliteral">"FNZ  v  180   "</font>&lt;&lt;glob.fnz&lt;&lt;<font class="stringliteral">"  2000  Frequency of nasal zero, in Hz\n"</font>;
01791   <font class="keywordflow">if</font> (glob.bnzDyn)
01792     outFile &lt;&lt;  <font class="stringliteral">"BNZ  V   40    "</font>&lt;&lt;glob.bnz&lt;&lt;<font class="stringliteral">"  1000  Bandwidth of nasal zero, in Hz\n"</font>;
01793   <font class="keywordflow">else</font>
01794     outFile &lt;&lt;  <font class="stringliteral">"BNZ  v   40    "</font>&lt;&lt;glob.bnz&lt;&lt;<font class="stringliteral">"  1000  Bandwidth of nasal zero, in Hz\n"</font>;
01795   <font class="keywordflow">if</font> (glob.ftpDyn)
01796     outFile &lt;&lt;  <font class="stringliteral">"FTP  V  300  "</font>&lt;&lt;glob.ftp&lt;&lt;<font class="stringliteral">"  3000  Frequency of tracheal pole, in Hz\n"</font>;
01797   <font class="keywordflow">else</font>
01798     outFile &lt;&lt;  <font class="stringliteral">"FTP  v  300  "</font>&lt;&lt;glob.ftp&lt;&lt;<font class="stringliteral">"  3000  Frequency of tracheal pole, in Hz\n"</font>;
01799   <font class="keywordflow">if</font> (glob.btpDyn)
01800     outFile &lt;&lt;  <font class="stringliteral">"BTP  V   40   "</font>&lt;&lt;glob.btp&lt;&lt;<font class="stringliteral">"  1000  Bandwidth of tracheal pole, in Hz\n"</font>;
01801   <font class="keywordflow">else</font>
01802     outFile &lt;&lt;  <font class="stringliteral">"BTP  v   40   "</font>&lt;&lt;glob.btp&lt;&lt;<font class="stringliteral">"  1000  Bandwidth of tracheal pole, in Hz\n"</font>;
01803   <font class="keywordflow">if</font> (glob.ftzDyn)
01804     outFile &lt;&lt;  <font class="stringliteral">"FTZ  V  300  "</font>&lt;&lt;glob.ftz&lt;&lt;<font class="stringliteral">"  3000  Frequency of tracheal zero, in Hz\n"</font>;
01805   <font class="keywordflow">else</font>
01806     outFile &lt;&lt;  <font class="stringliteral">"FTZ  v  300  "</font>&lt;&lt;glob.ftz&lt;&lt;<font class="stringliteral">"  3000  Frequency of tracheal zero, in Hz\n"</font>;
01807   <font class="keywordflow">if</font> (glob.btzDyn)
01808     outFile &lt;&lt;  <font class="stringliteral">"BTZ  V   40   "</font>&lt;&lt;glob.btz&lt;&lt;<font class="stringliteral">"  2000  Bandwidth of tracheal zero, in Hz\n"</font>;
01809   <font class="keywordflow">else</font>
01810     outFile &lt;&lt;  <font class="stringliteral">"BTZ  v   40   "</font>&lt;&lt;glob.btz&lt;&lt;<font class="stringliteral">"  2000  Bandwidth of tracheal zero, in Hz\n"</font>;
01811   <font class="keywordflow">if</font> (glob.a2fDyn)
01812     outFile &lt;&lt;  <font class="stringliteral">"A2F  V    0     "</font>&lt;&lt;glob.a2f&lt;&lt;<font class="stringliteral">"    80  Amp of fric-excited parallel 2nd formant, in dB\n"</font>;
01813   <font class="keywordflow">else</font>
01814     outFile &lt;&lt;  <font class="stringliteral">"A2F  v    0     "</font>&lt;&lt;glob.a2f&lt;&lt;<font class="stringliteral">"    80  Amp of fric-excited parallel 2nd formant, in dB\n"</font>;
01815   <font class="keywordflow">if</font> (glob.a3fDyn)
01816     outFile &lt;&lt;  <font class="stringliteral">"A3F  V    0     "</font>&lt;&lt;glob.a3f&lt;&lt;<font class="stringliteral">"    80  Amp of fric-excited parallel 3rd formant, in dB\n"</font>;
01817   <font class="keywordflow">else</font>
01818     outFile &lt;&lt;  <font class="stringliteral">"A3F  v    0     "</font>&lt;&lt;glob.a3f&lt;&lt;<font class="stringliteral">"    80  Amp of fric-excited parallel 3rd formant, in dB\n"</font>;
01819   <font class="keywordflow">if</font> (glob.a4fDyn)
01820     outFile &lt;&lt;  <font class="stringliteral">"A4F  V    0     "</font>&lt;&lt;glob.a4f&lt;&lt;<font class="stringliteral">"    80  Amp of fric-excited parallel 4th formant, in dB\n"</font>;
01821   <font class="keywordflow">else</font>
01822     outFile &lt;&lt;  <font class="stringliteral">"A4F  v    0     "</font>&lt;&lt;glob.a4f&lt;&lt;<font class="stringliteral">"    80  Amp of fric-excited parallel 4th formant, in dB\n"</font>;
01823   <font class="keywordflow">if</font> (glob.a5fDyn)
01824     outFile &lt;&lt;  <font class="stringliteral">"A5F  V    0     "</font>&lt;&lt;glob.a5f&lt;&lt;<font class="stringliteral">"    80  Amp of fric-excited parallel 5th formant, in dB\n"</font>;
01825   <font class="keywordflow">else</font>
01826     outFile &lt;&lt;  <font class="stringliteral">"A5F  v    0     "</font>&lt;&lt;glob.a5f&lt;&lt;<font class="stringliteral">"    80  Amp of fric-excited parallel 5th formant, in dB\n"</font>;
01827   <font class="keywordflow">if</font> (glob.a6fDyn)
01828     outFile &lt;&lt;  <font class="stringliteral">"A6F  V    0     "</font>&lt;&lt;glob.a6f&lt;&lt;<font class="stringliteral">"    80  Amp of fric-excited parallel 6th formant, in dB\n"</font>;
01829   <font class="keywordflow">else</font>
01830     outFile &lt;&lt;  <font class="stringliteral">"A6F  v    0     "</font>&lt;&lt;glob.a6f&lt;&lt;<font class="stringliteral">"    80  Amp of fric-excited parallel 6th formant, in dB\n"</font>;
01831   <font class="keywordflow">if</font> (glob.abDyn)
01832     outFile &lt;&lt;  <font class="stringliteral">"AB   V    0     "</font>&lt;&lt;glob.ab&lt;&lt;<font class="stringliteral">"    80  Amp of fric-excited parallel bypass path, in dB\n"</font>;
01833   <font class="keywordflow">else</font>
01834     outFile &lt;&lt;  <font class="stringliteral">"AB   v    0     "</font>&lt;&lt;glob.ab&lt;&lt;<font class="stringliteral">"    80  Amp of fric-excited parallel bypass path, in dB\n"</font>;
01835   <font class="keywordflow">if</font> (glob.b2pDyn)
01836     outFile &lt;&lt;  <font class="stringliteral">"B2F  V   40   "</font>&lt;&lt;glob.b2p&lt;&lt;<font class="stringliteral">"  1000  Bw of fric-excited parallel 2nd formant, in Hz\n"</font>;
01837   <font class="keywordflow">else</font>
01838     outFile &lt;&lt;  <font class="stringliteral">"B2F  v   40   "</font>&lt;&lt;glob.b2p&lt;&lt;<font class="stringliteral">"  1000  Bw of fric-excited parallel 2nd formant, in Hz\n"</font>;
01839   <font class="keywordflow">if</font> (glob.b3pDyn)
01840     outFile &lt;&lt;  <font class="stringliteral">"B3F  V   60   "</font>&lt;&lt;glob.b3p&lt;&lt;<font class="stringliteral">"  1000  Bw of fric-excited parallel 3rd formant, in Hz\n"</font>;
01841   <font class="keywordflow">else</font>
01842     outFile &lt;&lt;  <font class="stringliteral">"B3F  v   60   "</font>&lt;&lt;glob.b3p&lt;&lt;<font class="stringliteral">"  1000  Bw of fric-excited parallel 3rd formant, in Hz\n"</font>;
01843   <font class="keywordflow">if</font> (glob.b4pDyn)
01844     outFile &lt;&lt;  <font class="stringliteral">"B4F  V  100   "</font>&lt;&lt;glob.b4p&lt;&lt;<font class="stringliteral">"  1000  Bw of fric-excited parallel 4th formant, in Hz\n"</font>;
01845   <font class="keywordflow">else</font>
01846     outFile &lt;&lt;  <font class="stringliteral">"B4F  v  100   "</font>&lt;&lt;glob.b4p&lt;&lt;<font class="stringliteral">"  1000  Bw of fric-excited parallel 4th formant, in Hz\n"</font>;
01847   <font class="keywordflow">if</font> (glob.b5pDyn)
01848     outFile &lt;&lt;  <font class="stringliteral">"B5F  V  100   "</font>&lt;&lt;glob.b5p&lt;&lt;<font class="stringliteral">"  1500  Bw of fric-excited parallel 5th formant, in Hz\n"</font>;
01849   <font class="keywordflow">else</font>
01850     outFile &lt;&lt;  <font class="stringliteral">"B5F  v  100   "</font>&lt;&lt;glob.b5p&lt;&lt;<font class="stringliteral">"  1500  Bw of fric-excited parallel 5th formant, in Hz\n"</font>;
01851   <font class="keywordflow">if</font> (glob.b6pDyn)
01852     outFile &lt;&lt;  <font class="stringliteral">"B6F  V  100  "</font>&lt;&lt;glob.b6p&lt;&lt;<font class="stringliteral">"  4000  Bw of fric-excited parallel 6th formant, in Hz\n"</font>;
01853   <font class="keywordflow">else</font>
01854     outFile &lt;&lt;  <font class="stringliteral">"B6F  v  100  "</font>&lt;&lt;glob.b6p&lt;&lt;<font class="stringliteral">"  4000  Bw of fric-excited parallel 6th formant, in Hz\n"</font>;
01855   <font class="keywordflow">if</font> (glob.anvDyn)
01856     outFile &lt;&lt;  <font class="stringliteral">"ANV  V    0     "</font>&lt;&lt;glob.anv&lt;&lt;<font class="stringliteral">"    80  Amp of voice-excited parallel nasal form., in dB\n"</font>;
01857   <font class="keywordflow">else</font>
01858     outFile &lt;&lt;  <font class="stringliteral">"ANV  v    0     "</font>&lt;&lt;glob.anv&lt;&lt;<font class="stringliteral">"    80  Amp of voice-excited parallel nasal form., in dB\n"</font>;
01859   <font class="keywordflow">if</font> (glob.a1vDyn)
01860     outFile &lt;&lt;  <font class="stringliteral">"A1V  V    0    "</font>&lt;&lt;glob.a1v&lt;&lt;<font class="stringliteral">"    80  Amp of voice-excited parallel 1st formant, in dB\n"</font>;
01861   <font class="keywordflow">else</font>
01862     outFile &lt;&lt;  <font class="stringliteral">"A1V  v    0    "</font>&lt;&lt;glob.a1v&lt;&lt;<font class="stringliteral">"    80  Amp of voice-excited parallel 1st formant, in dB\n"</font>;
01863   <font class="keywordflow">if</font> (glob.a2vDyn)
01864     outFile &lt;&lt;  <font class="stringliteral">"A2V  V    0    "</font>&lt;&lt;glob.a2v&lt;&lt;<font class="stringliteral">"    80  Amp of voice-excited parallel 2nd formant, in dB\n"</font>;
01865   <font class="keywordflow">else</font>
01866     outFile &lt;&lt;  <font class="stringliteral">"A2V  v    0    "</font>&lt;&lt;glob.a2v&lt;&lt;<font class="stringliteral">"    80  Amp of voice-excited parallel 2nd formant, in dB\n"</font>;
01867   <font class="keywordflow">if</font> (glob.a3vDyn)
01868     outFile &lt;&lt;  <font class="stringliteral">"A3V  V    0    "</font>&lt;&lt;glob.a3v&lt;&lt;<font class="stringliteral">"    80  Amp of voice-excited parallel 3rd formant, in dB\n"</font>;
01869   <font class="keywordflow">else</font>
01870     outFile &lt;&lt;  <font class="stringliteral">"A3V  v    0    "</font>&lt;&lt;glob.a3v&lt;&lt;<font class="stringliteral">"    80  Amp of voice-excited parallel 3rd formant, in dB\n"</font>;
01871   <font class="keywordflow">if</font> (glob.a4vDyn)
01872     outFile &lt;&lt;  <font class="stringliteral">"A4V  V    0    "</font>&lt;&lt;glob.a4v&lt;&lt;<font class="stringliteral">"    80  Amp of voice-excited parallel 4th formant, in dB\n"</font>;
01873   <font class="keywordflow">else</font>
01874     outFile &lt;&lt;  <font class="stringliteral">"A4V  v    0    "</font>&lt;&lt;glob.a4v&lt;&lt;<font class="stringliteral">"    80  Amp of voice-excited parallel 4th formant, in dB\n"</font>;
01875   <font class="keywordflow">if</font> (glob.atvDyn)
01876     outFile &lt;&lt;  <font class="stringliteral">"ATV  V    0     "</font>&lt;&lt;glob.atv&lt;&lt;<font class="stringliteral">"    80  Amp of voice-excited par tracheal formant, in dB\n"</font>;
01877   <font class="keywordflow">else</font>
01878     outFile &lt;&lt;  <font class="stringliteral">"ATV  v    0     "</font>&lt;&lt;glob.atv&lt;&lt;<font class="stringliteral">"    80  Amp of voice-excited par tracheal formant, in dB\n"</font>;
01879   
01880   outFile &lt;&lt;  <font class="stringliteral">"\n\n\n\n"</font>; <font class="comment">// skip four lines</font>
01881   
01882 
01883   outFile &lt;&lt;  <font class="stringliteral">"Varied Parameters:\n"</font>;
01884   outFile.width(4);
01885   outFile &lt;&lt;  <font class="stringliteral">"time"</font>;
01886   <font class="keywordflow">if</font> (glob.f0Dyn) outFile &lt;&lt; <font class="stringliteral">"   F0"</font>;
01887   <font class="keywordflow">if</font> (glob.avDyn) outFile &lt;&lt; <font class="stringliteral">"   AV"</font>;
01888   <font class="keywordflow">if</font> (glob.oqDyn) outFile &lt;&lt; <font class="stringliteral">"   OQ"</font>;
01889   <font class="keywordflow">if</font> (glob.sqDyn) outFile &lt;&lt; <font class="stringliteral">"   SQ"</font>;
01890   <font class="keywordflow">if</font> (glob.tlDyn) outFile &lt;&lt; <font class="stringliteral">"   TL"</font>;
01891   <font class="keywordflow">if</font> (glob.flDyn) outFile &lt;&lt; <font class="stringliteral">"   FL"</font>;
01892   <font class="keywordflow">if</font> (glob.diDyn) outFile &lt;&lt; <font class="stringliteral">"   DI"</font>;
01893   <font class="keywordflow">if</font> (glob.ahDyn) outFile &lt;&lt; <font class="stringliteral">"   AH"</font>;
01894   <font class="keywordflow">if</font> (glob.afDyn) outFile &lt;&lt; <font class="stringliteral">"   AF"</font>;
01895   <font class="keywordflow">if</font> (glob.f1Dyn) outFile &lt;&lt; <font class="stringliteral">"   F1"</font>;
01896   <font class="keywordflow">if</font> (glob.b1Dyn) outFile &lt;&lt; <font class="stringliteral">"   B1"</font>;
01897   <font class="keywordflow">if</font> (glob.df1Dyn) outFile &lt;&lt; <font class="stringliteral">"   DF1"</font>;
01898   <font class="keywordflow">if</font> (glob.db1Dyn) outFile &lt;&lt; <font class="stringliteral">"   DB1"</font>;
01899   <font class="keywordflow">if</font> (glob.f2Dyn) outFile &lt;&lt; <font class="stringliteral">"   F2"</font>;
01900   <font class="keywordflow">if</font> (glob.b2Dyn) outFile &lt;&lt; <font class="stringliteral">"   B2"</font>;
01901   <font class="keywordflow">if</font> (glob.f3Dyn) outFile &lt;&lt; <font class="stringliteral">"   F3"</font>;
01902   <font class="keywordflow">if</font> (glob.b3Dyn) outFile &lt;&lt; <font class="stringliteral">"   B3"</font>;
01903   <font class="keywordflow">if</font> (glob.f4Dyn) outFile &lt;&lt; <font class="stringliteral">"   F4"</font>;
01904   <font class="keywordflow">if</font> (glob.b4Dyn) outFile &lt;&lt; <font class="stringliteral">"   B4"</font>;
01905   <font class="keywordflow">if</font> (glob.f5Dyn) outFile &lt;&lt; <font class="stringliteral">"   F5"</font>;
01906   <font class="keywordflow">if</font> (glob.b5Dyn) outFile &lt;&lt; <font class="stringliteral">"   B5"</font>;
01907   <font class="keywordflow">if</font> (glob.f6Dyn) outFile &lt;&lt; <font class="stringliteral">"   F6"</font>;
01908   <font class="keywordflow">if</font> (glob.b6Dyn) outFile &lt;&lt; <font class="stringliteral">"   B6"</font>;
01909   <font class="keywordflow">if</font> (glob.fnpDyn) outFile &lt;&lt; <font class="stringliteral">"   FNP"</font>;
01910   <font class="keywordflow">if</font> (glob.bnpDyn) outFile &lt;&lt; <font class="stringliteral">"   BNP"</font>;
01911   <font class="keywordflow">if</font> (glob.fnzDyn) outFile &lt;&lt; <font class="stringliteral">"   FNZ"</font>;
01912   <font class="keywordflow">if</font> (glob.bnzDyn) outFile &lt;&lt; <font class="stringliteral">"   BNZ"</font>;
01913   <font class="keywordflow">if</font> (glob.ftpDyn) outFile &lt;&lt; <font class="stringliteral">"   FTP"</font>;
01914   <font class="keywordflow">if</font> (glob.btpDyn) outFile &lt;&lt; <font class="stringliteral">"   BTZ"</font>;
01915   <font class="keywordflow">if</font> (glob.ftzDyn) outFile &lt;&lt; <font class="stringliteral">"   FTZ"</font>;
01916   <font class="keywordflow">if</font> (glob.btzDyn) outFile &lt;&lt; <font class="stringliteral">"   BTZ"</font>;
01917   <font class="keywordflow">if</font> (glob.a2fDyn) outFile &lt;&lt; <font class="stringliteral">"   A2F"</font>;
01918   <font class="keywordflow">if</font> (glob.a3fDyn) outFile &lt;&lt; <font class="stringliteral">"   A3F"</font>;
01919   <font class="keywordflow">if</font> (glob.a4fDyn) outFile &lt;&lt; <font class="stringliteral">"   A4F"</font>;
01920   <font class="keywordflow">if</font> (glob.a5fDyn) outFile &lt;&lt; <font class="stringliteral">"   A5F"</font>;
01921   <font class="keywordflow">if</font> (glob.a6fDyn) outFile &lt;&lt; <font class="stringliteral">"   A6F"</font>;
01922   <font class="keywordflow">if</font> (glob.abDyn) outFile &lt;&lt; <font class="stringliteral">"   AB"</font>;
01923   <font class="keywordflow">if</font> (glob.b2pDyn) outFile &lt;&lt; <font class="stringliteral">"   B2F"</font>;
01924   <font class="keywordflow">if</font> (glob.b3pDyn) outFile &lt;&lt; <font class="stringliteral">"   B3F"</font>;
01925   <font class="keywordflow">if</font> (glob.b4pDyn) outFile &lt;&lt; <font class="stringliteral">"   B4F"</font>;
01926   <font class="keywordflow">if</font> (glob.b5pDyn) outFile &lt;&lt; <font class="stringliteral">"   B5F"</font>;
01927   <font class="keywordflow">if</font> (glob.b6pDyn) outFile &lt;&lt; <font class="stringliteral">"   B6F"</font>;
01928   <font class="keywordflow">if</font> (glob.anvDyn) outFile &lt;&lt; <font class="stringliteral">"   ANV"</font>;
01929   <font class="keywordflow">if</font> (glob.a1vDyn) outFile &lt;&lt; <font class="stringliteral">"   A1V"</font>;
01930   <font class="keywordflow">if</font> (glob.a2vDyn) outFile &lt;&lt; <font class="stringliteral">"   A2V"</font>;
01931   <font class="keywordflow">if</font> (glob.a3vDyn) outFile &lt;&lt; <font class="stringliteral">"   A3V"</font>;
01932   <font class="keywordflow">if</font> (glob.a4vDyn) outFile &lt;&lt; <font class="stringliteral">"   A4V"</font>;
01933   <font class="keywordflow">if</font> (glob.atvDyn) outFile &lt;&lt; <font class="stringliteral">"   ATV"</font>;
01934 
01935   outFile &lt;&lt;  <font class="stringliteral">"\n"</font>;
01936   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01937     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01938       outFile &lt;&lt; <font class="stringliteral">"# name of phone: "</font>&lt;&lt;syllableVec[syl].PhonVec()[pho].Name()&lt;&lt;<font class="stringliteral">"\n"</font>;
01939       outFile &lt;&lt; <font class="stringliteral">"# meaning of params:\n"</font>;
01940       outFile &lt;&lt; <font class="stringliteral">"# time"</font>;
01941       <font class="keywordflow">if</font> (glob.f0Dyn) outFile &lt;&lt; <font class="stringliteral">" F0"</font>;
01942       <font class="keywordflow">if</font> (glob.avDyn) outFile &lt;&lt; <font class="stringliteral">" AV"</font>;
01943       <font class="keywordflow">if</font> (glob.oqDyn) outFile &lt;&lt; <font class="stringliteral">" OQ"</font>;
01944       <font class="keywordflow">if</font> (glob.sqDyn) outFile &lt;&lt; <font class="stringliteral">" SQ"</font>;
01945       <font class="keywordflow">if</font> (glob.tlDyn) outFile &lt;&lt; <font class="stringliteral">" TL"</font>;
01946       <font class="keywordflow">if</font> (glob.flDyn) outFile &lt;&lt; <font class="stringliteral">" FL"</font>;
01947       <font class="keywordflow">if</font> (glob.diDyn) outFile &lt;&lt; <font class="stringliteral">" DI"</font>;
01948       <font class="keywordflow">if</font> (glob.ahDyn) outFile &lt;&lt; <font class="stringliteral">" AH"</font>;
01949       <font class="keywordflow">if</font> (glob.afDyn) outFile &lt;&lt; <font class="stringliteral">" AF"</font>;
01950       <font class="keywordflow">if</font> (glob.f1Dyn) outFile &lt;&lt; <font class="stringliteral">" F1"</font>;
01951       <font class="keywordflow">if</font> (glob.b1Dyn) outFile &lt;&lt; <font class="stringliteral">" B1"</font>;
01952       <font class="keywordflow">if</font> (glob.df1Dyn) outFile &lt;&lt; <font class="stringliteral">" DF1"</font>;
01953       <font class="keywordflow">if</font> (glob.db1Dyn) outFile &lt;&lt; <font class="stringliteral">" DB1"</font>;
01954       <font class="keywordflow">if</font> (glob.f2Dyn) outFile &lt;&lt; <font class="stringliteral">" F2"</font>;
01955       <font class="keywordflow">if</font> (glob.b2Dyn) outFile &lt;&lt; <font class="stringliteral">" B2"</font>;
01956       <font class="keywordflow">if</font> (glob.f3Dyn) outFile &lt;&lt; <font class="stringliteral">" F3"</font>;
01957       <font class="keywordflow">if</font> (glob.b3Dyn) outFile &lt;&lt; <font class="stringliteral">" B3"</font>;
01958       <font class="keywordflow">if</font> (glob.f4Dyn) outFile &lt;&lt; <font class="stringliteral">" F4"</font>;
01959       <font class="keywordflow">if</font> (glob.b4Dyn) outFile &lt;&lt; <font class="stringliteral">" B4"</font>;
01960       <font class="keywordflow">if</font> (glob.f5Dyn) outFile &lt;&lt; <font class="stringliteral">" F5"</font>;
01961       <font class="keywordflow">if</font> (glob.b5Dyn) outFile &lt;&lt; <font class="stringliteral">" B5"</font>;
01962       <font class="keywordflow">if</font> (glob.f6Dyn) outFile &lt;&lt; <font class="stringliteral">" F6"</font>;
01963       <font class="keywordflow">if</font> (glob.b6Dyn) outFile &lt;&lt; <font class="stringliteral">" B6"</font>;
01964       <font class="keywordflow">if</font> (glob.fnpDyn) outFile &lt;&lt; <font class="stringliteral">" FNP"</font>;
01965       <font class="keywordflow">if</font> (glob.bnpDyn) outFile &lt;&lt; <font class="stringliteral">" BNP"</font>;
01966       <font class="keywordflow">if</font> (glob.fnzDyn) outFile &lt;&lt; <font class="stringliteral">" FNZ"</font>;
01967       <font class="keywordflow">if</font> (glob.bnzDyn) outFile &lt;&lt; <font class="stringliteral">" BNZ"</font>;
01968       <font class="keywordflow">if</font> (glob.ftpDyn) outFile &lt;&lt; <font class="stringliteral">" FTP"</font>;
01969       <font class="keywordflow">if</font> (glob.btpDyn) outFile &lt;&lt; <font class="stringliteral">" BTZ"</font>;
01970       <font class="keywordflow">if</font> (glob.ftzDyn) outFile &lt;&lt; <font class="stringliteral">" FTZ"</font>;
01971       <font class="keywordflow">if</font> (glob.btzDyn) outFile &lt;&lt; <font class="stringliteral">" BTZ"</font>;
01972       <font class="keywordflow">if</font> (glob.a2fDyn) outFile &lt;&lt; <font class="stringliteral">" A2F"</font>;
01973       <font class="keywordflow">if</font> (glob.a3fDyn) outFile &lt;&lt; <font class="stringliteral">" A3F"</font>;
01974       <font class="keywordflow">if</font> (glob.a4fDyn) outFile &lt;&lt; <font class="stringliteral">" A4F"</font>;
01975       <font class="keywordflow">if</font> (glob.a5fDyn) outFile &lt;&lt; <font class="stringliteral">" A5F"</font>;
01976       <font class="keywordflow">if</font> (glob.a6fDyn) outFile &lt;&lt; <font class="stringliteral">" A6F"</font>;
01977       <font class="keywordflow">if</font> (glob.abDyn) outFile &lt;&lt; <font class="stringliteral">" AB"</font>;
01978       <font class="keywordflow">if</font> (glob.b2pDyn) outFile &lt;&lt; <font class="stringliteral">" B2F"</font>;
01979       <font class="keywordflow">if</font> (glob.b3pDyn) outFile &lt;&lt; <font class="stringliteral">" B3F"</font>;
01980       <font class="keywordflow">if</font> (glob.b4pDyn) outFile &lt;&lt; <font class="stringliteral">" B4F"</font>;
01981       <font class="keywordflow">if</font> (glob.b5pDyn) outFile &lt;&lt; <font class="stringliteral">" B5F"</font>;
01982       <font class="keywordflow">if</font> (glob.b6pDyn) outFile &lt;&lt; <font class="stringliteral">" B6F"</font>;
01983       <font class="keywordflow">if</font> (glob.anvDyn) outFile &lt;&lt; <font class="stringliteral">" ANV"</font>;
01984       <font class="keywordflow">if</font> (glob.a1vDyn) outFile &lt;&lt; <font class="stringliteral">" A1V"</font>;
01985       <font class="keywordflow">if</font> (glob.a2vDyn) outFile &lt;&lt; <font class="stringliteral">" A2V"</font>;
01986       <font class="keywordflow">if</font> (glob.a3vDyn) outFile &lt;&lt; <font class="stringliteral">" A3V"</font>;
01987       <font class="keywordflow">if</font> (glob.a4vDyn) outFile &lt;&lt; <font class="stringliteral">" A4V"</font>;
01988       <font class="keywordflow">if</font> (glob.atvDyn) outFile &lt;&lt; <font class="stringliteral">" ATV"</font>;
01989       outFile &lt;&lt;  <font class="stringliteral">"\n"</font>;
01990       syllableVec[syl].PhonVec()[pho].printSenSynFrames(start, outFile, glob);
01991       start +=  syllableVec[syl].PhonVec()[pho].FrameNum() * glob.ui;
01992     }
01993   }
01994 }
</div></pre>    </td>
  </tr>
</table>
<a name="a3" doxytag="phrase::printSyllableVec"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::printSyllableVec (
          </b></td>
          <td valign="bottom"><b>
ostream &amp; <em>outFile</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
prints names of phones to outFile (debugging).
<p>
<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>ostream</em>
&nbsp;</td><td>
 &amp;outFile </td></tr>
</table>
</dl><div class="fragment"><pre>00078                                               {
00079   <font class="keywordflow">for</font> (uint i=0; i&lt;syllableVec.size(); i++) {
00080     syllableVec[i].printPhonVec(outFile);
00081     <font class="keywordflow">if</font> (syllableVec[i].PhonNum()&lt;4)
00082       outFile &lt;&lt; <font class="stringliteral">"\t"</font>;
00083     outFile &lt;&lt; <font class="stringliteral">"\taccentType = "</font> &lt;&lt; (uint) syllableVec[i].Accent()&lt;&lt;<font class="stringliteral">","</font>;
00084     outFile &lt;&lt; <font class="stringliteral">"\t"</font>;
00085     outFile &lt;&lt; <font class="stringliteral">"avr. f0 = "</font> &lt;&lt; syllableVec[i].MeanF0() &lt;&lt; <font class="stringliteral">"\n"</font>;
00086   }
00087 }
</div></pre>    </td>
  </tr>
</table>
<a name="a6" doxytag="phrase::readF0FromDB"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::readF0FromDB (
          </b></td>
          <td valign="bottom"><b>
string <em>diphonBase</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> &amp; <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
assignes only f0-vals.
<p>
It's used for resynthesis if you only want to read in the original  intonation contour to print it to a new input-file in connection with <dl compact><dt>
<b>See also: </b><dd>
 <a class="el" href="class_phrase.html#a5">readPhoList</a>() </dl><dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>string</em>
&nbsp;</td><td>
 diphonBase, the directory containing the diphone-files. </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>02235                                                            {
02236   
02237   <font class="comment">// variable declarations</font>
02238   string actName, nextName, requiredDiphon;
02239   <a class="code" href="class_phon.html">phon</a> *actPhonP, *nextPhonP;
02240   string diphonType;
02241   string buffer;        <font class="comment">// tmp-buffer for line in diphon-file</font>
02242   vector&lt;string&gt; bufferVec;
02243   PHON_MANNER actManner;
02244   uint lineCnt=0; <font class="comment">// Cnt of lines in diphon-file</font>
02245   vector&lt;uint&gt; diphonFrameNums(0); <font class="comment">// list of frameNums foreach diphon</font>
02246 
02247   uint phonBrdFrm; <font class="comment">// border frame foreach phon</font>
02248   uint phonFrameNum; <font class="comment">// frameNum in database of phon</font>
02249   uint allFrameCnt=0; <font class="comment">// help Cnt for assignment of params to phones </font>
02250 
02251   <font class="comment">// vectors for markers in diphons</font>
02252   vector&lt;uint&gt; t1(0), t2(0), border(0);
02253   <font class="comment">// t1: first transition, t2: 2. transition</font>
02254   <font class="comment">// border between diphones</font>
02255   
02256   vector&lt;uint&gt; tmpF0;
02257 
02258   uint <a class="code" href="class_phon.html">phon</a>=0;
02259   string diphonName;
02260   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
02261     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
02262 
02263       actPhonP = &amp;syllableVec[syl].PhonVec()[pho];
02264       <font class="keywordflow">if</font> (pho==syllableVec[syl].PhonNum()-1)
02265         <font class="keywordflow">if</font> (syl==syllableVec.size()-1)
02266           <font class="keywordflow">break</font>;
02267         <font class="keywordflow">else</font>
02268           nextPhonP = &amp;syllableVec[syl+1].PhonVec()[0];
02269       <font class="keywordflow">else</font>
02270         nextPhonP = &amp;syllableVec[syl].PhonVec()[pho+1];
02271 
02272       actName = (*actPhonP).<a class="code" href="class_phon.html#a37">Name</a>();
02273       nextName = (*nextPhonP).<a class="code" href="class_phon.html#a37">Name</a>();
02274 
02275       requiredDiphon = actName + <font class="stringliteral">"-"</font> + nextName;
02276       
02277       requiredDiphon = diphonBase + <font class="stringliteral">"/"</font> + requiredDiphon + <font class="stringliteral">".dip"</font>;
02278       <font class="comment">//    cout &lt;&lt; requiredDiphon &lt;&lt; "\n";</font>
02279       ifstream inFile(requiredDiphon.c_str());
02280       <font class="keywordflow">if</font> (inFile.good()) {
02281         lineCnt = 0;
02282         <font class="keywordflow">while</font>  (getline(inFile, buffer)) {
02283           <font class="keywordflow">if</font> (buffer != <font class="stringliteral">""</font> &amp;&amp; buffer.at(0) != <font class="charliteral">'#'</font>) {
02284             bufferVec = <a class="code" href="util_h.html#a67">string2vec</a>(buffer);
02285             <font class="keywordflow">if</font> (lineCnt==0) {
02286               diphonName = bufferVec[1];
02287             }
02288             <font class="keywordflow">if</font> (lineCnt==1) {
02289               <font class="keywordflow">if</font> (bufferVec[0]!=<font class="stringliteral">"frameNumber"</font>) <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"error in diphon-file:"</font>+diphonName+<font class="stringliteral">"\n"</font>,-3);
02290               diphonFrameNums.push_back(atoi(bufferVec[1].c_str()));
02291             }
02292             <font class="keywordflow">else</font> <font class="keywordflow">if</font> (lineCnt==2) {
02293               <font class="keywordflow">if</font> (bufferVec[0]!=<font class="stringliteral">"t1"</font>) <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"error in diphon-file:"</font>+diphonName+<font class="stringliteral">"\n"</font>,-3);
02294               t1.push_back(atoi(bufferVec[1].c_str()));
02295             } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (lineCnt==3) {
02296               <font class="keywordflow">if</font> (bufferVec[0]!=<font class="stringliteral">"border"</font>) <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"error in diphon-file:"</font>+diphonName+<font class="stringliteral">"\n"</font>,-3);
02297               border.push_back(atoi(bufferVec[1].c_str()));
02298             }  <font class="keywordflow">else</font> <font class="keywordflow">if</font> (lineCnt==4) {
02299               <font class="keywordflow">if</font> (bufferVec[0]!=<font class="stringliteral">"t2"</font>) <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"error in diphon-file:"</font>+diphonName+<font class="stringliteral">"\n"</font>,-3);
02300               t2.push_back(atoi(bufferVec[1].c_str()));
02301             }
02302             <font class="keywordflow">else</font> <font class="keywordflow">if</font> (lineCnt&gt;4) {
02303               tmpF0.push_back(atoi(bufferVec[0].c_str()));
02304             }
02305             lineCnt++;
02306           } <font class="comment">// if (buffer != "") </font>
02307         } <font class="comment">// while (getline(inFile, buffer)) </font>
02308         inFile.close();
02309       } <font class="keywordflow">else</font> {
02310         <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"can't open diphon-file: "</font> + requiredDiphon + <font class="stringliteral">"\n"</font>, -1);
02311       } <font class="comment">// if (inFile.good())      </font>
02312       <a class="code" href="class_phon.html">phon</a>++;
02313     } <font class="comment">// foreach pho</font>
02314   } <font class="comment">// foreach syl</font>
02315   
02316   <font class="comment">// assign parameters to phones</font>
02317   <a class="code" href="class_phon.html">phon</a>=0;
02318   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
02319     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
02320       actPhonP = &amp;syllableVec[syl].PhonVec()[pho];
02321       actName = (*actPhonP).<a class="code" href="class_phon.html#a37">Name</a>();
02322       actManner = (*actPhonP).<a class="code" href="class_phon.html#a39">Manner</a>();
02323       
02324       <font class="keywordflow">if</font> (!(syl==0 &amp;&amp; pho==0) &amp;&amp; !(syl==syllableVec.size()-1 &amp;&amp; pho==syllableVec[syl].PhonNum()-1) ) {  
02325         <font class="comment">//if (actManner == silence) { </font>
02326           <font class="comment">// phonFrameNums.push_back(0);</font>
02327         <font class="comment">//} else </font>
02328           <font class="keywordflow">if</font> (actManner != stop_voiced &amp;&amp; actManner != stop_voiceless) {
02329           <font class="comment">// first phon should always be silence</font>
02330           <font class="keywordflow">if</font> (<a class="code" href="class_phon.html">phon</a>==0) <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"you've found a bug!!!\n"</font>,-50); 
02331           <font class="comment">// cout &lt;&lt; actName &lt;&lt;" " &lt;&lt; diphonFrameNums[phon-1]-border[phon-1]+border[phon] &lt;&lt;"\n";</font>
02332           phonFrameNum = diphonFrameNums[<a class="code" href="class_phon.html">phon</a>-1] - border[<a class="code" href="class_phon.html">phon</a>-1] + border[<a class="code" href="class_phon.html">phon</a>];
02333           phonBrdFrm = diphonFrameNums[<a class="code" href="class_phon.html">phon</a>-1]-border[<a class="code" href="class_phon.html">phon</a>-1];
02334           (*actPhonP).<a class="code" href="class_phon.html#a4">setSteadyStart</a>(t2[<a class="code" href="class_phon.html">phon</a>-1] - border[<a class="code" href="class_phon.html">phon</a>-1]);
02335           (*actPhonP).<a class="code" href="class_phon.html#a5">setSteadyEnd</a>(diphonFrameNums[<a class="code" href="class_phon.html">phon</a>-1] - border[<a class="code" href="class_phon.html">phon</a>-1] + t1[<a class="code" href="class_phon.html">phon</a>]);
02336           <font class="comment">// cout &lt;&lt; actName &lt;&lt;" "&lt;&lt;phonFrameNum&lt;&lt;"\n";</font>
02337         } <font class="keywordflow">else</font> { <font class="comment">// phon is stop</font>
02338           <font class="comment">//     cout &lt;&lt; actName &lt;&lt;" " &lt;&lt; diphonFrameNums[phon-1]-border[phon-1]+border[phon]&lt;&lt;"\n";</font>
02339           phonFrameNum = diphonFrameNums[<a class="code" href="class_phon.html">phon</a>-1] - border[<a class="code" href="class_phon.html">phon</a>-1] + border[<a class="code" href="class_phon.html">phon</a>];
02340           phonBrdFrm = diphonFrameNums[<a class="code" href="class_phon.html">phon</a>-1]-border[<a class="code" href="class_phon.html">phon</a>-1];
02341         }
02342         
02343         <font class="comment">// copy original params</font>
02344           <font class="comment">//        if (actManner != silence) {</font>
02345           
02346           vector&lt;uint&gt; actTmpF0(0);
02347           
02348           <font class="keywordflow">for</font> (uint phonFrameCnt=0; phonFrameCnt &lt; phonFrameNum; phonFrameCnt++) {
02349             actTmpF0.push_back(tmpF0[allFrameCnt]);
02350             allFrameCnt++;
02351           } <font class="comment">// for (uint phonFrameCnt=0; phonFrameCnt&lt;phonFrameNum; phonFrameCnt++)</font>
02352           
02353           <font class="comment">// check diphonborders for big freq-jumps</font>
02354           
02355           <font class="comment">// fill param vectors</font>
02356           (*actPhonP).<a class="code" href="class_phon.html#a10">setF0Vec</a>(actTmpF0, glob);  
02357           
02358           <font class="comment">//}</font>
02359       }
02360       <a class="code" href="class_phon.html">phon</a>++;
02361     } <font class="comment">// foreach pho</font>
02362   }  <font class="comment">// foreach syl</font>
02363 }
</div></pre>    </td>
  </tr>
</table>
<a name="a4" doxytag="phrase::readPhoFile"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::readPhoFile (
          </b></td>
          <td valign="bottom"><b>
istream &amp; <em>inFile</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> &amp; <em>kg</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
reads in phones for syllables from inFile.
<p>
the format of the pho-file is as followed:<ul>
<li>comments are started by a '#' as first char of line<li><a class="el" href="class_syllable.html">syllable</a>-borders are denoted by a single '-' as first char of line,  followed by an integer denoting the accent-type: 0 for none,  1 for word-accent, 2 for sentence-accent<li>feature-flags have the syntax: &lt;flag&gt; &lt;time of occurance in msec&gt; <li>possible feature-flags are: +/- voc, brt, nas, lar, spr for voiced, breathy, nasalized,  laryngealized, spread respectively these features can be valid in regions and are followed by a time value +rounded, +overshoot, +undershoot for the corresponding vowel qualities these features are valid for the whole phone<li>phone descriptors follow the mbrola-syntax: &lt;name&gt;  &lt;duration in msec&gt; &lt;intonation description&gt;. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>istream</em>
&nbsp;</td><td>
 &amp;inFile </ul>
</td></tr>
</table>
</dl><div class="fragment"><pre>00266                                                         {
00267   string buffer;
00268   <font class="comment">//  phon tmpPhon;</font>
00269   string name;
00270   <font class="keyword">const</font> string syllableSeperator = <font class="stringliteral">"-"</font>;
00271   <font class="keywordtype">int</font> dur;
00272   <a class="code" href="class_syllable.html">syllable</a> tmpSyl;
00273   vector&lt;uint&gt; tmpF0ValVec(0);
00274   vector&lt;uint&gt; tmpF0TimeVec(0);
00275   <a class="code" href="class_PHON_FEATURES.html">PHON_FEATURES</a> tmpPhonFeatures;
00276 
00277   <a class="code" href="phon_h.html#a36">initPhonFeatures</a>(tmpPhonFeatures);
00278 
00279   <font class="keywordflow">while</font> (getline(inFile, buffer)) {
00280 
00281     <font class="comment">// a valid line in a pho-file is either a comment</font>
00282     <font class="keywordflow">if</font> (buffer != <font class="stringliteral">""</font> &amp;&amp; buffer.at(0) != <font class="charliteral">'#'</font>) {
00283       vector&lt;string&gt; tokenVec;
00284       tokenVec = <a class="code" href="util_h.html#a67">string2vec</a>(buffer);
00285       
00286       
00287       <font class="comment">// or a syllable-separator</font>
00288      <font class="keywordflow">if</font> (tokenVec[0] == syllableSeperator) { <font class="comment">// this is a syllable border</font>
00289        <font class="comment">// read the accent-type</font>
00290        <font class="keywordflow">if</font> (tokenVec.size()&gt;1) {
00291          tmpSyl.<a class="code" href="class_syllable.html#a0">setAccent</a>((ACCENT_TYPE) atoi(tokenVec[1].c_str()));
00292        } <font class="keywordflow">else</font> {
00293          <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing accentType in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);
00294        }
00295         <font class="comment">// push the last phonFeatures</font>
00296         <a class="code" href="class_phon.html">phon</a> *tmpPhonP;
00297         tmpPhonP = &amp;tmpSyl.<a class="code" href="class_syllable.html#a7">PhonVec</a>()[tmpSyl.<a class="code" href="class_syllable.html#a10">PhonNum</a>()-1];
00298         (*tmpPhonP).<a class="code" href="class_phon.html#a3">setPhonFeatures</a>(tmpPhonFeatures);
00299         <a class="code" href="phon_h.html#a36">initPhonFeatures</a>(tmpPhonFeatures);
00300         tmpSyl.<a class="code" href="class_syllable.html#a9">calcMeanF0</a>();
00301         <font class="comment">// push the syllable</font>
00302         syllableVec.push_back(tmpSyl);
00303         <font class="comment">// clear the tmp-syllable</font>
00304         tmpSyl.<a class="code" href="class_syllable.html#a11">clearPhonVec</a>();
00305         
00306         <font class="comment">// or a feature-flag</font>
00307      } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tokenVec[0] == <font class="stringliteral">"+voc"</font>) {
00308         <font class="keywordflow">if</font> (tokenVec.size()&gt;1) {
00309           tmpPhonFeatures.vocStart = <a class="code" href="util_h.html#a68">msec2frames</a>(atoi(tokenVec[1].c_str()), glob);
00310         } <font class="keywordflow">else</font> 
00311           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing parameter in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);     
00312         <font class="keywordflow">if</font> (!tmpPhonFeatures.voiced)
00313           tmpPhonFeatures.vocStop = A_HIGH_INT;
00314         tmpPhonFeatures.voiced = <font class="keyword">true</font>;
00315       } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tokenVec[0] == <font class="stringliteral">"-voc"</font>) {
00316         <font class="keywordflow">if</font> (!tmpPhonFeatures.voiced)
00317           tmpPhonFeatures.vocStart = 0;
00318         <font class="keywordflow">if</font> (tokenVec.size()&gt;1) {
00319           tmpPhonFeatures.vocStop = <a class="code" href="util_h.html#a68">msec2frames</a>(atoi(tokenVec[1].c_str()), glob);
00320         } <font class="keywordflow">else</font> 
00321           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing parameter in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);
00322         tmpPhonFeatures.voiced = <font class="keyword">true</font>;
00323       } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tokenVec[0] == <font class="stringliteral">"+brt"</font>) {
00324         <font class="keywordflow">if</font> (tokenVec.size()&gt;2) {
00325           tmpPhonFeatures.brtStart = <a class="code" href="util_h.html#a68">msec2frames</a>(atoi(tokenVec[1].c_str()), glob);
00326           tmpPhonFeatures.brtRate = atoi(tokenVec[2].c_str());    
00327         } <font class="keywordflow">else</font> 
00328           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing parameter in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);
00329         tmpPhonFeatures.brtStop = A_HIGH_INT;
00330         tmpPhonFeatures.breathy = <font class="keyword">true</font>;
00331       } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tokenVec[0] == <font class="stringliteral">"-brt"</font>) {
00332         <font class="keywordflow">if</font> (!tmpPhonFeatures.breathy)
00333           tmpPhonFeatures.brtStart = 0;
00334         <font class="keywordflow">if</font> (tokenVec.size()&gt;1) {
00335           tmpPhonFeatures.brtStop = <a class="code" href="util_h.html#a68">msec2frames</a>(atoi(tokenVec[1].c_str()), glob);
00336           <font class="keywordflow">if</font> (!tmpPhonFeatures.breathy) { <font class="comment">// if it's not allready breathy, get rate</font>
00337             <font class="keywordflow">if</font> (tokenVec.size()&gt;2)     
00338               tmpPhonFeatures.brtRate = atoi(tokenVec[2].c_str());      
00339             <font class="keywordflow">else</font> 
00340               <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing parameter in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);
00341           }
00342         } <font class="keywordflow">else</font> 
00343           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing parameter in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);
00344         tmpPhonFeatures.breathy = <font class="keyword">true</font>;
00345       } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tokenVec[0] == <font class="stringliteral">"+nas"</font>) {
00346         <font class="keywordflow">if</font> (tokenVec.size()&gt;1) {
00347         tmpPhonFeatures.nasStart = <a class="code" href="util_h.html#a68">msec2frames</a>(atoi(tokenVec[1].c_str()), glob);
00348         } <font class="keywordflow">else</font> 
00349           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing parameter in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);
00350         tmpPhonFeatures.nasStop = A_HIGH_INT;
00351         tmpPhonFeatures.nasalized = <font class="keyword">true</font>;
00352       } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tokenVec[0] == <font class="stringliteral">"-nas"</font>) {
00353         <font class="keywordflow">if</font> (!tmpPhonFeatures.nasalized)
00354           tmpPhonFeatures.nasStart = 0;
00355         <font class="keywordflow">if</font> (tokenVec.size()&gt;1) {
00356           tmpPhonFeatures.nasStop = <a class="code" href="util_h.html#a68">msec2frames</a>(atoi(tokenVec[1].c_str()), glob);
00357         } <font class="keywordflow">else</font> 
00358           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing parameter in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);
00359         tmpPhonFeatures.nasalized = <font class="keyword">true</font>;
00360       } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tokenVec[0] == <font class="stringliteral">"+lar"</font>) {
00361         <font class="keywordflow">if</font> (tokenVec.size()&gt;2) {
00362           tmpPhonFeatures.larStart = <a class="code" href="util_h.html#a68">msec2frames</a>(atoi(tokenVec[1].c_str()), glob);
00363           tmpPhonFeatures.larRate = atoi(tokenVec[2].c_str());
00364         } <font class="keywordflow">else</font> 
00365           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing parameter in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);
00366         tmpPhonFeatures.larStop = A_HIGH_INT;
00367         tmpPhonFeatures.laryngealized = <font class="keyword">true</font>;
00368       } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tokenVec[0] == <font class="stringliteral">"-lar"</font>) {
00369         <font class="keywordflow">if</font> (!tmpPhonFeatures.laryngealized)
00370           tmpPhonFeatures.larStart = 0;
00371         <font class="keywordflow">if</font> (tokenVec.size()&gt;1) {
00372           tmpPhonFeatures.larStop = <a class="code" href="util_h.html#a68">msec2frames</a>(atoi(tokenVec[1].c_str()), glob);
00373           <font class="keywordflow">if</font> (!tmpPhonFeatures.laryngealized) {
00374             <font class="keywordflow">if</font> (tokenVec.size()&gt;2) 
00375               tmpPhonFeatures.larRate = atoi(tokenVec[2].c_str());
00376             <font class="keywordflow">else</font> 
00377               <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing parameter in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);  
00378           }  
00379         } <font class="keywordflow">else</font> 
00380           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing parameter in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);
00381         tmpPhonFeatures.laryngealized = <font class="keyword">true</font>;
00382 
00383       } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tokenVec[0] == <font class="stringliteral">"+spr"</font>) {
00384         <font class="keywordflow">if</font> (tokenVec.size()&gt;1) {
00385           tmpPhonFeatures.spreadRate = atoi(tokenVec[1].c_str());
00386         } <font class="keywordflow">else</font> 
00387           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing parameter in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);
00388         tmpPhonFeatures.spread = <font class="keyword">true</font>;
00389       } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tokenVec[0] == <font class="stringliteral">"+rounded"</font>) {
00390         <font class="keywordflow">if</font> (tokenVec.size()&gt;1) {
00391           tmpPhonFeatures.roundedRate = atoi(tokenVec[1].c_str());
00392         } <font class="keywordflow">else</font> 
00393           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing parameter in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);
00394         tmpPhonFeatures.rounded = <font class="keyword">true</font>; 
00395       } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tokenVec[0] == <font class="stringliteral">"+tense"</font>) {
00396         tmpPhonFeatures.tense = <font class="keyword">true</font>;
00397         <font class="keywordflow">if</font> (tokenVec.size()&gt;1) {
00398           tmpPhonFeatures.tenseRate = atoi(tokenVec[1].c_str());
00399         } <font class="keywordflow">else</font> 
00400           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing parameter in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);
00401         
00402       } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tokenVec[0] == <font class="stringliteral">"+falsett"</font>) {
00403         tmpPhonFeatures.falsett = <font class="keyword">true</font>;
00404         <font class="keywordflow">if</font> (tokenVec.size()&gt;1) {
00405           tmpPhonFeatures.falsettRate = atoi(tokenVec[1].c_str());
00406         } <font class="keywordflow">else</font> 
00407           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing parameter in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);
00408         
00409       } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tokenVec[0] == <font class="stringliteral">"+whisper"</font>) {
00410         tmpPhonFeatures.whisper = <font class="keyword">true</font>;
00411         <font class="keywordflow">if</font> (tokenVec.size()&gt;1) {
00412           tmpPhonFeatures.whisperRate = atoi(tokenVec[1].c_str());
00413         } <font class="keywordflow">else</font> 
00414           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing parameter in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);
00415 
00416       } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tokenVec[0] == <font class="stringliteral">"+lax"</font>) {
00417         tmpPhonFeatures.lax = <font class="keyword">true</font>;
00418       } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tokenVec[0] == <font class="stringliteral">"-undershoot"</font>) {
00419         tmpPhonFeatures.undershoot = <font class="keyword">true</font>;
00420         <font class="keywordflow">if</font> (tokenVec.size()&gt;1) {
00421           tmpPhonFeatures.undershootRate = atoi(tokenVec[1].c_str());
00422         } <font class="keywordflow">else</font> 
00423           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing parameter in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);
00424 
00425       } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tokenVec[0] == <font class="stringliteral">"+overshoot"</font>) {
00426         tmpPhonFeatures.overshoot = <font class="keyword">true</font>;
00427         <font class="keywordflow">if</font> (tokenVec.size()&gt;1) {
00428           tmpPhonFeatures.overshootRate = atoi(tokenVec[1].c_str());
00429         } <font class="keywordflow">else</font> 
00430           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing parameter in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);
00431 
00432         <font class="comment">// or a valid pho-file line is a phone-description</font>
00433       } <font class="keywordflow">else</font> {
00434         name = tokenVec[0];
00435         <font class="keywordflow">if</font> (tokenVec.size() &gt; 1) {      
00436           dur = atoi(tokenVec[1].c_str());
00437         } <font class="keywordflow">else</font> {
00438           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: no duration at phon "</font>+name+<font class="stringliteral">" \n"</font>,-1);
00439         }
00440         <font class="keywordflow">if</font> ((tokenVec.size()-2)%2 == 0) {
00441           <font class="keywordflow">for</font> (uint i=2; i&lt;tokenVec.size(); i=i+2) {
00442             tmpF0TimeVec.push_back(atoi(tokenVec[i].c_str()));
00443             <font class="comment">// we get f0Vals in 10ths of herz</font>
00444             tmpF0ValVec.push_back(atoi(tokenVec[i+1].c_str())*10);          
00445           }
00446         } <font class="keywordflow">else</font> {
00447           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: error in intonation description at phon "</font>+name+<font class="stringliteral">" \n"</font>,-1);
00448         }
00449         <a class="code" href="class_phon.html">phon</a> tmpPhon(name, dur, glob);
00450         tmpPhon.<a class="code" href="class_phon.html#a8">setF0ValVec</a>(tmpF0ValVec);
00451         tmpPhon.<a class="code" href="class_phon.html#a9">setF0TimeVec</a>(tmpF0TimeVec);
00452         tmpPhon.<a class="code" href="class_phon.html#a119">modelIntonation</a>(glob);
00453         
00454         tmpF0ValVec.erase(tmpF0ValVec.begin(), tmpF0ValVec.end());
00455         tmpF0TimeVec.erase(tmpF0TimeVec.begin(), tmpF0TimeVec.end());
00456         
00457         tmpSyl.<a class="code" href="class_syllable.html#a2">addPhon</a>(tmpPhon);
00458         <font class="keywordflow">if</font> (tmpSyl.<a class="code" href="class_syllable.html#a10">PhonNum</a>()&gt;1) {
00459           <a class="code" href="class_phon.html">phon</a> *tmpPhonP;
00460           tmpPhonP = &amp;tmpSyl.<a class="code" href="class_syllable.html#a7">PhonVec</a>()[tmpSyl.<a class="code" href="class_syllable.html#a10">PhonNum</a>()-2];
00461           (*tmpPhonP).<a class="code" href="class_phon.html#a3">setPhonFeatures</a>(tmpPhonFeatures);
00462         } <font class="keywordflow">else</font>
00463           tmpPhon.<a class="code" href="class_phon.html#a3">setPhonFeatures</a>(tmpPhonFeatures);
00464         
00465         <a class="code" href="phon_h.html#a36">initPhonFeatures</a>(tmpPhonFeatures);
00466       }
00467     } <font class="comment">// if no comment or empty line</font>
00468   } <font class="comment">// while (getline(inFile, buffer))</font>
00469   <a class="code" href="class_phrase.html#c0">calcDur</a>();
00470 }
</div></pre>    </td>
  </tr>
</table>
<a name="a5" doxytag="phrase::readPhoList"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::readPhoList (
          </b></td>
          <td valign="bottom"><b>
istream &amp; <em>inFile</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> &amp; <em>kg</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
assignes only names of phones and <a class="el" href="class_syllable.html">syllable</a> borders.
<p>
It's used for resynthesis if you only want to read in the original  intonation contour to print it to a new input-file in connection with <dl compact><dt>
<b>See also: </b><dd>
 <a class="el" href="class_phrase.html#a6">readF0FromDB</a>()  </dl><dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>istream</em>
&nbsp;</td><td>
 inFile </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob </td></tr>
</table>
</dl><div class="fragment"><pre>00472                                                         {
00473   string buffer;
00474   <font class="comment">//  phon tmpPhon;</font>
00475   string name;
00476   <font class="keyword">const</font> string syllableSeperator = <font class="stringliteral">"-"</font>;
00477   <a class="code" href="class_syllable.html">syllable</a> tmpSyl;
00478   
00479   <font class="keywordflow">while</font> (getline(inFile, buffer)) {
00480     
00481     <font class="comment">// a valid line in a pho-file is either a comment</font>
00482     <font class="keywordflow">if</font> (buffer != <font class="stringliteral">""</font> &amp;&amp; buffer.at(0) != <font class="charliteral">'#'</font>) {
00483       vector&lt;string&gt; tokenVec;
00484       tokenVec = <a class="code" href="util_h.html#a67">string2vec</a>(buffer);
00485       
00486       
00487       <font class="comment">// or a syllable-separator</font>
00488       <font class="keywordflow">if</font> (tokenVec[0] == syllableSeperator) { <font class="comment">// this is a syllable border</font>
00489         <font class="comment">// read the accent-type</font>
00490         <font class="keywordflow">if</font> (tokenVec.size()&gt;1) {
00491           tmpSyl.<a class="code" href="class_syllable.html#a0">setAccent</a>((ACCENT_TYPE) atoi(tokenVec[1].c_str()));
00492         } <font class="keywordflow">else</font> {
00493           <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"phrase::readPhoFile: missing accentType in phon-feature near phon "</font>+name+<font class="stringliteral">"\n"</font>, -3);
00494         }
00495         <font class="comment">// push the syllable</font>
00496         syllableVec.push_back(tmpSyl);
00497         <font class="comment">// clear the tmp-syllable</font>
00498         tmpSyl.<a class="code" href="class_syllable.html#a11">clearPhonVec</a>();
00499         
00500         <font class="comment">// or a valid pho-file line is a phone-description</font>
00501       } <font class="keywordflow">else</font> {
00502         name = tokenVec[0];
00503         <a class="code" href="class_phon.html">phon</a> tmpPhon(name, 0, glob);
00504       
00505         tmpSyl.<a class="code" href="class_syllable.html#a2">addPhon</a>(tmpPhon);
00506       }
00507       
00508     } <font class="comment">// if no comment or empty line</font>
00509   } <font class="comment">// while (getline(inFile, buffer))</font>
00510 }
</div></pre>    </td>
  </tr>
</table>
<a name="a7" doxytag="phrase::readPhonData"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::readPhonData (
          </b></td>
          <td valign="bottom"><b>
string <em>diphonBase</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> &amp; <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
reads in amplitudes, formantfreqs and formantbandwidths from diphon-database.
<p>
It depends on flags whether there are 3 or 5 formantfreqs dynamic. It assignes f0-vals to frames as well as markers for steady state or time of burst.
<p>
<dl compact><dt>
<b>See also: </b><dd>
 <a class="el" href="class_globalsT.html">globalsT</a>
<p>
</dl><dl compact><dt>
<b><a class="el" href="todo.html#_todo000006">Todo: </a></b><dd>
write more methods to readin the formanttrack data, e.g for whole words, demisylables or whatever.
<p>
write better code or even think of a more elegant way to readin the information.
<p>
write a method that generates formanttracks from rules.</dl> 
<p>
 <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>string</em>
&nbsp;</td><td>
 diphonBase, the directory containing the diphone-files. </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>01995                                                            {
01996   
01997   <font class="comment">// variable declarations</font>
01998   string actName, nextName, requiredDiphon;
01999   <font class="keywordtype">int</font> actFrameNum, actBurstStart, actAspStart;
02000 
02001   <a class="code" href="class_phon.html">phon</a> *actPhonP, *nextPhonP;
02002   string diphonType;
02003   string buffer;        <font class="comment">// tmp-buffer for line in diphon-file</font>
02004   vector&lt;string&gt; bufferVec;
02005   PHON_MANNER actManner;
02006   uint lineCnt=0; <font class="comment">// Cnt of lines in diphon-file</font>
02007   vector&lt;uint&gt; diphonFrameNums(0); <font class="comment">// list of frameNums foreach diphon</font>
02008 
02009   uint phonBrdFrm; <font class="comment">// border frame foreach phon</font>
02010   uint phonFrameNum; <font class="comment">// frameNum in database of phon</font>
02011   uint allFrameCnt=0; <font class="comment">// help Counter for assignment of params to phones </font>
02012 
02013   <font class="comment">// vectors for markers in diphons</font>
02014   vector&lt;uint&gt; t1(0), t2(0), border(0);
02015   <font class="comment">// t1: first transition, t2: 2. transition</font>
02016   <font class="comment">// border between diphones</font>
02017   
02018   vector&lt;uint&gt; tmpF0;
02019   vector&lt;uint&gt; tmpAmp;
02020   vector&lt;uint&gt; tmpF1, tmpF2, tmpF3, tmpF4, tmpF5;
02021  
02022   <font class="comment">// borders for shortening of phones </font>
02023   <font class="keywordtype">int</font> leftBorder, rightBorder;
02024   uint burstStart, aspStart;
02025 
02026   uint <a class="code" href="class_phon.html">phon</a>=0;
02027   string diphonName;
02028   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
02029     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
02030 
02031       actPhonP = &amp;syllableVec[syl].PhonVec()[pho];
02032       <font class="keywordflow">if</font> (pho==syllableVec[syl].PhonNum()-1)
02033         <font class="keywordflow">if</font> (syl==syllableVec.size()-1)
02034           <font class="keywordflow">break</font>;
02035         <font class="keywordflow">else</font>
02036           nextPhonP = &amp;syllableVec[syl+1].PhonVec()[0];
02037       <font class="keywordflow">else</font>
02038         nextPhonP = &amp;syllableVec[syl].PhonVec()[pho+1];
02039 
02040       actName = (*actPhonP).<a class="code" href="class_phon.html#a37">Name</a>();
02041       actFrameNum = (*actPhonP).<a class="code" href="class_phon.html#a45">FrameNum</a>();
02042 
02043       nextName = (*nextPhonP).<a class="code" href="class_phon.html#a37">Name</a>();      
02044       requiredDiphon = actName + <font class="stringliteral">"-"</font> + nextName;
02045       requiredDiphon = diphonBase + <font class="stringliteral">"/"</font> + requiredDiphon + <font class="stringliteral">".dip"</font>;
02046       ifstream inFile(requiredDiphon.c_str());
02047       <font class="keywordflow">if</font> (inFile.good()) {
02048         lineCnt = 0;
02049         <font class="keywordflow">while</font>  (getline(inFile, buffer)) {
02050           <font class="keywordflow">if</font> (buffer != <font class="stringliteral">""</font> &amp;&amp; buffer.at(0) != <font class="charliteral">'#'</font>) {
02051             bufferVec = <a class="code" href="util_h.html#a67">string2vec</a>(buffer);
02052             <font class="keywordflow">if</font> (lineCnt==0) {
02053               diphonName = bufferVec[1];
02054             }
02055             <font class="keywordflow">if</font> (lineCnt==1) {
02056               <font class="keywordflow">if</font> (bufferVec[0]!=<font class="stringliteral">"frameNumber"</font>) <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"error in diphon-file:"</font>+diphonName+<font class="stringliteral">"\n"</font>,-3);
02057               diphonFrameNums.push_back(atoi(bufferVec[1].c_str()));
02058             }
02059             <font class="keywordflow">else</font> <font class="keywordflow">if</font> (lineCnt==2) {
02060               <font class="keywordflow">if</font> (bufferVec[0]!=<font class="stringliteral">"t1"</font>) <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"error in diphon-file:"</font>+diphonName+<font class="stringliteral">"\n"</font>,-3);
02061               t1.push_back(atoi(bufferVec[1].c_str()));
02062             } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (lineCnt==3) {
02063               <font class="keywordflow">if</font> (bufferVec[0]!=<font class="stringliteral">"border"</font>) <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"error in diphon-file:"</font>+diphonName+<font class="stringliteral">"\n"</font>,-3);
02064               border.push_back(atoi(bufferVec[1].c_str()));
02065             }  <font class="keywordflow">else</font> <font class="keywordflow">if</font> (lineCnt==4) {
02066               <font class="keywordflow">if</font> (bufferVec[0]!=<font class="stringliteral">"t2"</font>) <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"error in diphon-file:"</font>+diphonName+<font class="stringliteral">"\n"</font>,-3);
02067               t2.push_back(atoi(bufferVec[1].c_str()));
02068             }
02069             <font class="keywordflow">else</font> <font class="keywordflow">if</font> (lineCnt&gt;4) {
02070               tmpF0.push_back(atoi(bufferVec[0].c_str()));
02071               tmpAmp.push_back(atoi(bufferVec[1].c_str()));
02072               tmpF1.push_back(atoi(bufferVec[2].c_str()));
02073               tmpF2.push_back(atoi(bufferVec[3].c_str()));
02074               tmpF3.push_back(atoi(bufferVec[4].c_str()));
02075               <font class="keywordflow">if</font> (glob.use4Freq || glob.use5Freq) {
02076                 tmpF4.push_back(atoi(bufferVec[5].c_str()));
02077               }
02078               <font class="keywordflow">if</font> (glob.use5Freq) {
02079                 tmpF5.push_back(atoi(bufferVec[6].c_str()));
02080               }
02081             }
02082             lineCnt++;
02083           } <font class="comment">// if (buffer != "") </font>
02084         } <font class="comment">// while (getline(inFile, buffer)) </font>
02085         inFile.close();
02086       } <font class="keywordflow">else</font> {
02087         <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"can't open diphon-file: "</font> + requiredDiphon + <font class="stringliteral">"\n"</font>, -1);
02088       } <font class="comment">// if (inFile.good())      </font>
02089       <a class="code" href="class_phon.html">phon</a>++;
02090     } <font class="comment">// foreach pho</font>
02091   } <font class="comment">// foreach syl</font>
02092   
02093   <font class="comment">// assign parameters to phones</font>
02094   <a class="code" href="class_phon.html">phon</a>=0;
02095   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
02096     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
02097       actPhonP = &amp;syllableVec[syl].PhonVec()[pho];
02098       actName = (*actPhonP).<a class="code" href="class_phon.html#a37">Name</a>();
02099       actFrameNum = (*actPhonP).<a class="code" href="class_phon.html#a45">FrameNum</a>();
02100       
02101       actManner = (*actPhonP).<a class="code" href="class_phon.html#a39">Manner</a>();
02102       
02103       <font class="keywordflow">if</font> (!(syl==0 &amp;&amp; pho==0) &amp;&amp; !(syl==syllableVec.size()-1 &amp;&amp; pho==syllableVec[syl].PhonNum()-1) ) {  
02104         <font class="keywordflow">if</font> (actManner != stop_voiced &amp;&amp; actManner != stop_voiceless) {
02105           <font class="comment">// first phon should always be silence</font>
02106           <font class="keywordflow">if</font> (<a class="code" href="class_phon.html">phon</a>==0) <a class="code" href="util_h.html#a57">error</a>(<font class="stringliteral">"you've found a bug!!!\n"</font>,-50); 
02107           phonFrameNum = diphonFrameNums[<a class="code" href="class_phon.html">phon</a>-1] - border[<a class="code" href="class_phon.html">phon</a>-1] + border[<a class="code" href="class_phon.html">phon</a>];
02108           phonBrdFrm = diphonFrameNums[<a class="code" href="class_phon.html">phon</a>-1]-border[<a class="code" href="class_phon.html">phon</a>-1];
02109           (*actPhonP).<a class="code" href="class_phon.html#a4">setSteadyStart</a>(t2[<a class="code" href="class_phon.html">phon</a>-1] - border[<a class="code" href="class_phon.html">phon</a>-1]);
02110           (*actPhonP).<a class="code" href="class_phon.html#a5">setSteadyEnd</a>(diphonFrameNums[<a class="code" href="class_phon.html">phon</a>-1] - border[<a class="code" href="class_phon.html">phon</a>-1] + t1[<a class="code" href="class_phon.html">phon</a>]);
02111           
02112         } <font class="keywordflow">else</font> { <font class="comment">// phon is stop</font>
02113           phonFrameNum = diphonFrameNums[<a class="code" href="class_phon.html">phon</a>-1] - border[<a class="code" href="class_phon.html">phon</a>-1] + border[<a class="code" href="class_phon.html">phon</a>];
02114           phonBrdFrm = diphonFrameNums[<a class="code" href="class_phon.html">phon</a>-1]-border[<a class="code" href="class_phon.html">phon</a>-1];
02115           burstStart = diphonFrameNums[<a class="code" href="class_phon.html">phon</a>-1] - border[<a class="code" href="class_phon.html">phon</a>-1];
02116           aspStart = diphonFrameNums[<a class="code" href="class_phon.html">phon</a>-1] - border[<a class="code" href="class_phon.html">phon</a>-1] + t1[<a class="code" href="class_phon.html">phon</a>];
02117           <font class="comment">// cout &lt;&lt; actName&lt;&lt;" "&lt;&lt;phonFrameNum&lt;&lt;" "&lt;&lt;burstStart&lt;&lt;" "&lt;&lt;aspStart&lt;&lt;"\n";</font>
02118         }
02119         
02120         <font class="comment">// copy original params</font>
02121         
02122         <font class="keywordflow">if</font> (actManner != silence || glob.copysynthesis==<font class="keyword">true</font>) {
02123           vector&lt;uint&gt; actTmpAmp(0), actTmpF1(0), actTmpF2(0), 
02124             actTmpF3(0), actTmpF4(0), 
02125             actTmpF5(0);
02126           
02127           <font class="keywordflow">for</font> (uint phonFrameCnt=0; phonFrameCnt &lt; phonFrameNum; phonFrameCnt++) {
02128             actTmpAmp.push_back(tmpAmp[allFrameCnt]);
02129             actTmpF1.push_back(tmpF1[allFrameCnt]);
02130             actTmpF2.push_back(tmpF2[allFrameCnt]);
02131             actTmpF3.push_back(tmpF3[allFrameCnt]);
02132             <font class="keywordflow">if</font> (glob.use4Freq || glob.use5Freq)
02133               actTmpF4.push_back(tmpF4[allFrameCnt]);
02134             <font class="keywordflow">if</font> (glob.use5Freq) 
02135               actTmpF5.push_back(tmpF5[allFrameCnt]);
02136 
02137             allFrameCnt++;
02138           } <font class="comment">// for (uint phonFrameCnt=0; phonFrameCnt&lt;phonFrameNum; phonFrameCnt++)</font>
02139           <font class="comment">// check diphonborders for big freq-jumps</font>
02140           <font class="keywordflow">if</font> (phonBrdFrm!=0 &amp;&amp; phonBrdFrm!=phonFrameNum) {
02141             <font class="keywordflow">if</font> ((uint)abs((<font class="keywordtype">int</font>)(actTmpF1[phonBrdFrm-1]-actTmpF1[phonBrdFrm]))&gt;jumpTolerance &amp;&amp; ! glob.warningsOff)
02142               cerr&lt;&lt;<font class="stringliteral">"WARNING: readPhonData: big freq jump ("</font>&lt;&lt;abs((<font class="keywordtype">int</font>)(actTmpF1[phonBrdFrm-1]-actTmpF1[phonBrdFrm]))&lt;&lt;<font class="stringliteral">") for f1 at phon "</font>&lt;&lt;actName&lt;&lt;<font class="stringliteral">"\n"</font>;
02143             <font class="keywordflow">if</font> ((uint)abs((<font class="keywordtype">int</font>)(actTmpF2[phonBrdFrm-1]-actTmpF2[phonBrdFrm]))&gt;jumpTolerance &amp;&amp; ! glob.warningsOff)
02144               cerr&lt;&lt;<font class="stringliteral">"WARNING: readPhonData: big freq jump ("</font>&lt;&lt;abs((<font class="keywordtype">int</font>)(actTmpF2[phonBrdFrm-1]-actTmpF2[phonBrdFrm]))&lt;&lt;<font class="stringliteral">") for f2 at phon "</font>&lt;&lt;actName&lt;&lt;<font class="stringliteral">"\n"</font>;
02145             <font class="keywordflow">if</font> ((uint)abs((<font class="keywordtype">int</font>)(actTmpF3[phonBrdFrm-1]-actTmpF3[phonBrdFrm]))&gt;jumpTolerance &amp;&amp; ! glob.warningsOff)
02146               cerr&lt;&lt;<font class="stringliteral">"WARNING: readPhonData: big freq jump ("</font>&lt;&lt;abs((<font class="keywordtype">int</font>)(actTmpF3[phonBrdFrm-1]-actTmpF3[phonBrdFrm]))&lt;&lt;<font class="stringliteral">") for f3 at phon "</font>&lt;&lt;actName&lt;&lt;<font class="stringliteral">"\n"</font>;
02147           }
02148           
02149           <font class="comment">// fill param vectors</font>
02150           <font class="keywordflow">if</font> (glob.changeDurMethod == STEADY_STATE_CUT || (actManner==stop_voiced || actManner==stop_voiceless)) {
02151             <font class="keywordflow">if</font> (actManner != stop_voiced &amp;&amp; actManner != stop_voiceless) {
02152               leftBorder = (*actPhonP).<a class="code" href="class_phon.html#a109">SteadyStart</a>();
02153               rightBorder = (*actPhonP).<a class="code" href="class_phon.html#a110">SteadyEnd</a>(); 
02154             } <font class="keywordflow">else</font> { <font class="comment">// act phon is stop</font>
02155               leftBorder = 0; 
02156               rightBorder =  burstStart;
02157             }
02158             <font class="comment">// cout &lt;&lt; actName&lt;&lt;" "&lt;&lt;(*actPhonP).FrameNum()&lt;&lt;" "&lt;&lt;leftBorder&lt;&lt;" "&lt;&lt;rightBorder&lt;&lt;" "&lt;&lt;phonFrameNum&lt;&lt;"\n";</font>
02159             (*actPhonP).<a class="code" href="class_phon.html#a11">setAmpVec</a>(<a class="code" href="util_h.html#a65">change_valNum</a>((*actPhonP).Name(), (*actPhonP).<a class="code" href="class_phon.html#a45">FrameNum</a>(), leftBorder, rightBorder, actTmpAmp), glob);  
02160             (*actPhonP).<a class="code" href="class_phon.html#a12">setF1Vec</a>(<a class="code" href="util_h.html#a65">change_valNum</a>((*actPhonP).Name(), (*actPhonP).<a class="code" href="class_phon.html#a45">FrameNum</a>(), leftBorder, rightBorder, actTmpF1), glob);
02161             (*actPhonP).<a class="code" href="class_phon.html#a13">setF2Vec</a>(<a class="code" href="util_h.html#a65">change_valNum</a>((*actPhonP).Name(), (*actPhonP).<a class="code" href="class_phon.html#a45">FrameNum</a>(), leftBorder, rightBorder, actTmpF2), glob);
02162             (*actPhonP).<a class="code" href="class_phon.html#a14">setF3Vec</a>(<a class="code" href="util_h.html#a65">change_valNum</a>((*actPhonP).Name(), (*actPhonP).<a class="code" href="class_phon.html#a45">FrameNum</a>(), leftBorder, rightBorder, actTmpF3), glob);
02163             <font class="keywordflow">if</font> (glob.use4Freq || glob.use5Freq) 
02164               (*actPhonP).<a class="code" href="class_phon.html#a15">setF4Vec</a>(<a class="code" href="util_h.html#a65">change_valNum</a>((*actPhonP).Name(), (*actPhonP).<a class="code" href="class_phon.html#a45">FrameNum</a>(), leftBorder, rightBorder, actTmpF4), glob);
02165             <font class="keywordflow">if</font> (glob.use5Freq)
02166               (*actPhonP).<a class="code" href="class_phon.html#a16">setF5Vec</a>(<a class="code" href="util_h.html#a65">change_valNum</a>((*actPhonP).Name(), (*actPhonP).<a class="code" href="class_phon.html#a45">FrameNum</a>(), leftBorder, rightBorder, actTmpF5), glob);
02167           } <font class="keywordflow">else</font> { <font class="comment">//  changeDurMethod == TIME_ALIGNED</font>
02168             vector&lt;uint&gt; tmpTimeVec;
02169             <font class="keywordflow">for</font> (uint i=0; i&lt;phonFrameNum; i++)
02170               tmpTimeVec.push_back(i*(100/phonFrameNum));
02171             (*actPhonP).<a class="code" href="class_phon.html#a11">setAmpVec</a>(<a class="code" href="util_h.html#a63">modelTrack</a>((*actPhonP).Name(), (*actPhonP).<a class="code" href="class_phon.html#a45">FrameNum</a>(), actTmpAmp, tmpTimeVec), glob);  
02172             (*actPhonP).<a class="code" href="class_phon.html#a12">setF1Vec</a>(<a class="code" href="util_h.html#a63">modelTrack</a>((*actPhonP).Name(), (*actPhonP).<a class="code" href="class_phon.html#a45">FrameNum</a>(), actTmpF1, tmpTimeVec), glob);
02173             (*actPhonP).<a class="code" href="class_phon.html#a13">setF2Vec</a>(<a class="code" href="util_h.html#a63">modelTrack</a>((*actPhonP).Name(), (*actPhonP).<a class="code" href="class_phon.html#a45">FrameNum</a>(), actTmpF2, tmpTimeVec), glob);
02174             (*actPhonP).<a class="code" href="class_phon.html#a14">setF3Vec</a>(<a class="code" href="util_h.html#a63">modelTrack</a>((*actPhonP).Name(), (*actPhonP).<a class="code" href="class_phon.html#a45">FrameNum</a>(), actTmpF3, tmpTimeVec), glob);
02175             <font class="keywordflow">if</font> (glob.use4Freq || glob.use5Freq) 
02176               (*actPhonP).<a class="code" href="class_phon.html#a15">setF4Vec</a>(<a class="code" href="util_h.html#a63">modelTrack</a>((*actPhonP).Name(), (*actPhonP).<a class="code" href="class_phon.html#a45">FrameNum</a>(), actTmpF4, tmpTimeVec), glob);
02177             <font class="keywordflow">if</font> (glob.use5Freq)
02178               (*actPhonP).<a class="code" href="class_phon.html#a16">setF5Vec</a>(<a class="code" href="util_h.html#a63">modelTrack</a>((*actPhonP).Name(), (*actPhonP).<a class="code" href="class_phon.html#a45">FrameNum</a>(), actTmpF5, tmpTimeVec), glob);
02179 
02180           }
02181           <font class="keywordflow">if</font> (actManner == stop_voiced || actManner == stop_voiceless) { 
02182             <font class="comment">// cout &lt;&lt;actName&lt;&lt;": bS:"&lt;&lt;burstStart&lt;&lt;", aS:"&lt;&lt;aspStart&lt;&lt;"\n";</font>
02183             <font class="keywordflow">if</font> (glob.copysynthesis) {
02184               <font class="keywordflow">if</font> (burstStart &lt; (phonFrameNum-actFrameNum)) {
02185                 actBurstStart = 0;
02186                 actAspStart = aspStart - burstStart;
02187               } <font class="keywordflow">else</font> { 
02188                 actBurstStart = burstStart - (phonFrameNum-actFrameNum);
02189                 actAspStart = aspStart - (phonFrameNum-actFrameNum);
02190               }
02191             } <font class="keywordflow">else</font> {
02192               <font class="keywordflow">if</font> (actFrameNum&gt;=2) {
02193                 actBurstStart = actFrameNum-2;
02194                 actAspStart = actFrameNum-1;            
02195               } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (actFrameNum==1) {
02196                 actBurstStart = 0;
02197                 actAspStart = 1;                
02198               } <font class="keywordflow">else</font> {
02199                 actBurstStart = 0;
02200                 actAspStart = 0;                
02201               }
02202             }
02203             (*actPhonP).<a class="code" href="class_phon.html#a6">setBurstStart</a>(actBurstStart);
02204             (*actPhonP).<a class="code" href="class_phon.html#a7">setAspStart</a>(actAspStart);
02205             <font class="comment">// cout &lt;&lt;actName&lt;&lt;", bS:"&lt;&lt;actBurstStart&lt;&lt;", aS: "&lt;&lt;actAspStart&lt;&lt;", frameLength: "&lt;&lt;actFrameNum&lt;&lt;", dataBaseLength: "&lt;&lt;phonFrameNum&lt;&lt;"\n";</font>
02206             
02207           }
02208           
02209         } <font class="keywordflow">else</font> {
02210           <font class="comment">// for silent parts interpolate the formant tracks to avoid freq-jumps</font>
02211           uint startF1=tmpF1[allFrameCnt-1]; uint endF1=tmpF1[allFrameCnt];
02212           (*actPhonP).<a class="code" href="class_phon.html#a12">setF1Vec</a>(<a class="code" href="util_h.html#a40">interpolateLinear</a>((*actPhonP).FrameNum(), startF1, endF1), glob);
02213           uint startF2=tmpF2[allFrameCnt-1]; uint endF2=tmpF2[allFrameCnt];
02214           (*actPhonP).<a class="code" href="class_phon.html#a13">setF2Vec</a>(<a class="code" href="util_h.html#a40">interpolateLinear</a>((*actPhonP).FrameNum(), startF2, endF2), glob);
02215           uint startF3=tmpF3[allFrameCnt-1]; uint endF3=tmpF3[allFrameCnt];
02216           (*actPhonP).<a class="code" href="class_phon.html#a14">setF3Vec</a>(<a class="code" href="util_h.html#a40">interpolateLinear</a>((*actPhonP).FrameNum(), startF3, endF3), glob);
02217         } <font class="comment">// if (actManner != silence)</font>
02218       }
02219       <font class="keywordflow">if</font> (syl==syllableVec.size()-1 &amp;&amp; pho==syllableVec[syl].PhonNum()-1) {
02220         <font class="comment">// for silence at end continue formant-tracks to avoid freq-jumps</font>
02221         <font class="comment">// cout &lt;&lt;tmpF1[allFrameCnt-1]&lt;&lt;"\n";</font>
02222         uint startF1=tmpF1[allFrameCnt-1]; 
02223         (*actPhonP).<a class="code" href="class_phon.html#a12">setF1Vec</a>(<a class="code" href="util_h.html#a40">interpolateLinear</a>((*actPhonP).FrameNum(), startF1, startF1), glob);
02224         uint startF2=tmpF2[allFrameCnt-1]; 
02225         (*actPhonP).<a class="code" href="class_phon.html#a13">setF2Vec</a>(<a class="code" href="util_h.html#a40">interpolateLinear</a>((*actPhonP).FrameNum(), startF2, startF2), glob);
02226         uint startF3=tmpF3[allFrameCnt-1];
02227         (*actPhonP).<a class="code" href="class_phon.html#a14">setF3Vec</a>(<a class="code" href="util_h.html#a40">interpolateLinear</a>((*actPhonP).FrameNum(), startF3, startF3), glob);
02228       }
02229       <a class="code" href="class_phon.html">phon</a>++;
02230     } <font class="comment">// foreach pho</font>
02231   }  <font class="comment">// foreach syl</font>
02232 }
</div></pre>    </td>
  </tr>
</table>
<a name="a36" doxytag="phrase::rounded"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::rounded (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
adds rounded Lips characteristices.
<p>
All formants get lowered acording to rate. <dl compact><dt>
<b><a class="el" href="todo.html#_todo000009">Todo: </a></b><dd>
find a better model for rounded lips characteristics.</dl> <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>01380                                              {
01381   <a class="code" href="class_phon.html">phon</a> *pP;
01382   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01383     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01384       pP = &amp;syllableVec[syl].PhonVec()[pho];
01385       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a38">Type</a>() == vowel) {
01386         <a class="code" href="class_PHON_FEATURES.html">PHON_FEATURES</a> tmpPhonFeatures= (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>();
01387         tmpPhonFeatures.rounded = <font class="keyword">true</font>;
01388         tmpPhonFeatures.roundedRate = rate;       
01389         (*pP).<a class="code" href="class_phon.html#a3">setPhonFeatures</a>(tmpPhonFeatures);
01390       }
01391     }
01392   }     
01393   <font class="keywordflow">if</font> (glob.verbose)
01394     cerr &lt;&lt;<font class="stringliteral">"added lip-rounding at rate: "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">"\n"</font>;
01395 }
</div></pre>    </td>
  </tr>
</table>
<a name="a23" doxytag="phrase::smootheF0"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::smootheF0 (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>winsize</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
smoothing function: all f0Vals get centerFiltered around winsize.
<p>
<dl compact><dt>
<b>See also: </b><dd>
 <a class="el" href="class_phon.html#a123">phon::smootheF0</a>() </dl><dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 winsize </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>00781                                                   {
00782   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
00783     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
00784       <font class="keywordflow">if</font> (syllableVec[syl].PhonVec()[pho].Voiced() &amp;&amp; syllableVec[syl].PhonVec()[pho].Manner() != stop_voiced) {
00785         syllableVec[syl].PhonVec()[pho].smootheF0(winsize);
00786       }
00787     }
00788   }
00789   <font class="keywordflow">if</font> (glob.verbose)
00790     cerr &lt;&lt; <font class="stringliteral">"smoothing f0 with winSize: "</font>&lt;&lt;winsize&lt;&lt;<font class="stringliteral">"\n"</font>;
00791 }
</div></pre>    </td>
  </tr>
</table>
<a name="a35" doxytag="phrase::spread"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::spread (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
adds spread Lips characteristices.
<p>
The first 2 formants get shifted upwards according to rate. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>01363                                             {
01364   <a class="code" href="class_phon.html">phon</a> *pP;
01365   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01366     <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01367       pP = &amp;syllableVec[syl].PhonVec()[pho];
01368       <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a38">Type</a>()==vowel) {
01369         <a class="code" href="class_PHON_FEATURES.html">PHON_FEATURES</a> tmpPhonFeatures= (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>();
01370         tmpPhonFeatures.spread = <font class="keyword">true</font>;
01371         tmpPhonFeatures.spreadRate = rate;        
01372         (*pP).<a class="code" href="class_phon.html#a3">setPhonFeatures</a>(tmpPhonFeatures);
01373       }
01374     }
01375   }     
01376   <font class="keywordflow">if</font> (glob.verbose)
01377     cerr &lt;&lt;<font class="stringliteral">"added lip-spreading at rate: "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">"\n"</font>;
01378 }
</div></pre>    </td>
  </tr>
</table>
<a name="a34" doxytag="phrase::undershootVowels"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void phrase::undershootVowels (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="syllable_h.html#a3">ACCENT_TYPE</a> <em>accent</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="util_h.html#a4">uint</a> <em>rate</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
<a class="el" href="class_globalsT.html">globalsT</a> <em>glob</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
blur the vowel precision.
<p>
all formantVals in f1 and f2 of vowels in syllables with  get displaced towards the center freqencies by subtracting the  percentage by &lt;rate&gt; and distance to center frequency. <dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>ACCENT_TYPE</em>
&nbsp;</td><td>
 accent </td></tr>
<tr><td valign=top><em>uint</em>
&nbsp;</td><td>
 rate </td></tr>
<tr><td valign=top><em>globalsT</em>
&nbsp;</td><td>
 glob, defaultparams for klattsynth </td></tr>
</table>
</dl><div class="fragment"><pre>01345                                                                           {
01346   <a class="code" href="class_phon.html">phon</a> *pP;
01347   <font class="keywordflow">for</font> (uint syl=0; syl&lt;syllableVec.size(); syl++) {
01348     <font class="keywordflow">if</font> (syllableVec[syl].Accent()==accent) {
01349       <font class="keywordflow">for</font> (uint pho=0; pho&lt;syllableVec[syl].PhonNum(); pho++) {
01350         pP = &amp;syllableVec[syl].PhonVec()[pho];
01351         <font class="keywordflow">if</font> ((*pP).<a class="code" href="class_phon.html#a38">Type</a>() == vowel) {
01352           <a class="code" href="class_PHON_FEATURES.html">PHON_FEATURES</a> tmpPhonFeatures= (*pP).<a class="code" href="class_phon.html#a47">PhonFeatures</a>();
01353           tmpPhonFeatures.undershoot = <font class="keyword">true</font>;
01354           tmpPhonFeatures.undershootRate = rate;          
01355           (*pP).<a class="code" href="class_phon.html#a3">setPhonFeatures</a>(tmpPhonFeatures);
01356         }
01357       }
01358     }
01359   }     
01360   <font class="keywordflow">if</font> (glob.verbose)
01361     cerr &lt;&lt;<font class="stringliteral">"added undershoot at rate: "</font>&lt;&lt;rate&lt;&lt;<font class="stringliteral">" for accent-type: "</font>&lt;&lt;(uint)accent&lt;&lt;<font class="stringliteral">"\n"</font>;
01362 }
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a name="o2" doxytag="phrase::dur"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
<a class="el" href="util_h.html#a4">uint</a> phrase::dur<code> [private]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="o1" doxytag="phrase::meanF0"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
<a class="el" href="util_h.html#a4">uint</a> phrase::meanF0<code> [private]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="o0" doxytag="phrase::syllableVec"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
vector&lt; <a class="el" href="class_syllable.html">syllable</a> &gt; phrase::syllableVec<code> [private]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="phrase_h-source.html">phrase.h</a><li><a class="el" href="phrase_cc.html">phrase.cc</a></ul>
generated by <a href="http://www.stack.nl/~dimitri/doxygen/index.html">doxygen</a>
